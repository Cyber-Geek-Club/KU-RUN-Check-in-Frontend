import"../chunks/DsnmJJEf.js";import"../chunks/dQoSI2p6.js";import{$ as Ba,a7 as La,aj as Oa,a8 as He,a9 as Na,a6 as y,aa as S,f as t,ab as L,a2 as g,a3 as ja,m as U,af as v,i as m,ad as i,an as le,ae as o,o as p,ag as w,ak as pt,a1 as rt,a0 as _t,ap as Ia,al as Fe}from"../chunks/BzFeUjkD.js";import{e as zt,i as Ht}from"../chunks/CFC0_nPK.js";import{i as R}from"../chunks/yr0HFLoq.js";import{a as Aa,l as Pa,n as Ge}from"../chunks/CZARb_ez.js";import{b as ce,s as Tt,r as de,a as Ua}from"../chunks/DMKKEYkG.js";import{s as lt}from"../chunks/Dx5pcVVY.js";import{t as ct,f as ue,s as ve,a as Ve}from"../chunks/C9WUvhPB.js";import{i as Ja}from"../chunks/B4hL2_NH.js";import{g as za}from"../chunks/8b7-bA6A.js";import{a as Ke}from"../chunks/CfzA4fdq.js";import{S as I}from"../chunks/C0u8rGqG.js";import{API_BASE_URL as Ha,resolveImageUrl as Fa}from"../chunks/Cnqa9Cr2.js";import{R as pe}from"../chunks/peVj2t_B.js";var Ga=y('<button><svg class="nav-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <span class="btn-label"> </span></button>'),Va=y('<button><svg class="nav-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </button>'),Ka=y('<div class="mobile-overlay svelte-10685s1" role="button" tabindex="0" aria-label="Close menu"></div> <div class="mobile-drawer svelte-10685s1"><div class="drawer-header svelte-10685s1"><span class="brand-name svelte-10685s1" style="font-size: 1.4rem;">MENU</span><button class="close-btn svelte-10685s1">&times;</button></div> <div class="drawer-search svelte-10685s1"><input type="text" placeholder="Search..." class="drawer-search-input svelte-10685s1"/></div> <div class="drawer-content svelte-10685s1"><!> <div class="drawer-lang-item svelte-10685s1"><div class="lang-label-group svelte-10685s1"><svg class="nav-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path></svg> <span>Language</span></div> <div class="lang-toggle-pill svelte-10685s1"><button>TH</button> <button>EN</button></div></div></div> <button class="drawer-item logout-special svelte-10685s1">Logout</button></div>',1),qa=y('<div class="loading-container svelte-10685s1"><div class="spinner svelte-10685s1"></div> <p>Loading...</p></div>'),Za=y('<div class="no-events svelte-10685s1"><svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="opacity: 0.5; margin-bottom: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <p>No events found</p></div>'),Qa=y('‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ <span style="font-size: 0.8em; opacity: 0.8;"></span>',1),Ya=y('NOT OPEN <span style="font-size: 0.8em; opacity: 0.8;"></span>',1),Wa=y('<span class="status-badge no-active svelte-10685s1"><!></span>'),Xa=y('<span class="status-badge no-active svelte-10685s1"> </span>'),$a=y('<span class="status-badge pending svelte-10685s1"> </span>'),ts=y('<span class="status-badge svelte-10685s1"> </span>'),es=y('<span class="type-badge daily svelte-10685s1"> </span>'),as=y('<div class="info-pill progress-pill svelte-10685s1"><svg class="pill-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),ss=y('<div><div class="info-pills svelte-10685s1"><div class="info-pill svelte-10685s1"><svg class="pill-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></div> <div class="info-pill svelte-10685s1"><svg class="pill-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span> </span></div> <div class="info-pill svelte-10685s1"><svg class="pill-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <div class="info-pill highlight-pill svelte-10685s1"><svg class="pill-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span> </span></div> <!></div> <div class="card-separator svelte-10685s1"></div></div>'),ns=y('<button class="register-btn running svelte-10685s1"> </button>'),os=y('‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ <span style="font-size: 0.8em; opacity: 0.9;"></span>',1),is=y('NOT APPLY <span style="font-size: 0.8em; opacity: 0.9;"></span>',1),rs=y('<button class="register-btn unpublished svelte-10685s1" disabled><!></button>'),ls=y('<button class="register-btn no-active svelte-10685s1" disabled> </button>'),cs=y('<button class="register-btn full svelte-10685s1" disabled> </button>'),ds=y('<button class="register-btn coming-soon svelte-10685s1" disabled> </button>'),us=y('<button class="register-btn svelte-10685s1"><!></button>'),vs=y('<button class="cancel-direct-btn svelte-10685s1"> </button>'),ps=y('<div class="event-card svelte-10685s1"><div class="card-image svelte-10685s1"></div> <div class="card-content svelte-10685s1"><div class="card-header-row svelte-10685s1"><h3 class="card-title svelte-10685s1"> </h3> <div class="badges-col svelte-10685s1"><!> <div class="type-badges svelte-10685s1"><span> </span> <!></div> <div class="count-badge svelte-10685s1"><svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right:4px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> </div></div></div> <p> </p> <!> <div class="card-footer-actions svelte-10685s1"><button class="view-btn svelte-10685s1"> </button> <div class="footer-actions svelte-10685s1"><!> <!></div></div></div></div>'),_s=y('<div class="events-grid svelte-10685s1"></div>'),fs=y('<p class="error-text svelte-10685s1"> </p>'),hs=y('<p class="modal-subtitle svelte-10685s1"> </p>'),gs=y('<label class="upload-label svelte-10685s1"><input type="file" accept="image/*" hidden=""/> <div class="upload-placeholder svelte-10685s1"><span>Click to Upload Image</span></div></label>'),ms=y('<div class="image-preview svelte-10685s1"><img alt="Proof" class="svelte-10685s1"/> <button class="remove-img-btn svelte-10685s1">&times;</button></div>'),bs=y('<div class="modal-overlay svelte-10685s1"><div class="modal-box svelte-10685s1"><button class="modal-close svelte-10685s1">&times;</button> <div class="modal-body svelte-10685s1"><h3 class="modal-title svelte-10685s1"> </h3> <!> <div class="upload-area svelte-10685s1"><!></div> <button class="action-submit-btn purple-theme svelte-10685s1"> </button></div></div></div>'),ys=y('<label class="radio-item svelte-10685s1"><input type="radio" class="svelte-10685s1"/> <span class="radio-label svelte-10685s1"> </span></label>'),ws=y('<div class="reason-input svelte-10685s1"><textarea rows="3" class="svelte-10685s1"></textarea></div>'),ks=y('<div class="modal-overlay svelte-10685s1"><div class="modal-box svelte-10685s1"><button class="modal-close svelte-10685s1">&times;</button> <div class="modal-body svelte-10685s1"><h3 class="modal-title svelte-10685s1" style="color: #ef4444;"> </h3> <p class="modal-subtitle svelte-10685s1"> </p> <div class="cancel-options svelte-10685s1"></div> <!> <div class="action-row"><button class="action-submit-btn cancel-confirm-btn svelte-10685s1"> </button></div></div></div></div>'),Cs=y('<div class="app-container svelte-10685s1"><header class="header-bar svelte-10685s1"><div class="header-inner svelte-10685s1"><div class="left-group svelte-10685s1"><div class="brand"><span class="brand-name svelte-10685s1">Officer</span></div> <nav class="nav-menu desktop-only svelte-10685s1"></nav></div> <div class="search-bar-container desktop-only svelte-10685s1"><div class="search-input-wrapper svelte-10685s1"><svg class="search-icon svelte-10685s1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" class="search-input svelte-10685s1"/></div></div> <div class="user-zone svelte-10685s1"><div class="timer-pill svelte-10685s1"> </div> <div class="lang-switch desktop-only svelte-10685s1"><button>TH</button> <span class="sep svelte-10685s1">|</span> <button>EN</button></div> <button class="logout-btn desktop-only svelte-10685s1" aria-label="Logout"><svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button> <button class="mobile-toggle mobile-only svelte-10685s1" aria-label="Toggle menu"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 9h16M4 15h16"></path></svg></button></div></div></header> <!> <div class="scroll-container svelte-10685s1"><div class="content-wrapper svelte-10685s1"><div class="page-header svelte-10685s1"><h2 class="section-title svelte-10685s1">Event List</h2> <div class="title-underline svelte-10685s1"></div></div> <!> <footer class="app-footer svelte-10685s1"><div class="footer-separator svelte-10685s1"></div> <div class="footer-content svelte-10685s1"><p class="copyright svelte-10685s1">&copy; 2025 Cyber Geek. All rights reserved.</p> <p class="credits svelte-10685s1">Designed & Developed by <span class="highlight svelte-10685s1">Cyber Geek Development</span></p> <p class="contact svelte-10685s1">Contact: <a href="mailto:cybergeek.dev@proton.me" class="svelte-10685s1">cybergeek.dev@proton.me</a></p></div></footer></div></div> <!> <!></div>');function Us(qe,Ze){Ba(Ze,!1);const xt=U(),Qe=[],ft=Ha;let at=U(!1),Ft=U("event-list"),_e=U(!0),a=U("th"),ht=U(""),E=U([]),Mt=U("--:--:--"),W=null,Q=null,Dt=15e3,Gt=!1,Rt=null,Bt=null,fe=!1,he=U(!1),Vt=U(!1),gt=U(null),q=null,Et=U(null),Kt=U(null),V=U(""),dt=U("");const Ye=["‡∏ï‡∏¥‡∏î‡∏ò‡∏∏‡∏£‡∏∞‡∏î‡πà‡∏ß‡∏ô / Urgent matter","‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û / Health issue","‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® / Weather condition","‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / Transportation","‡∏≠‡∏∑‡πà‡∏ô‡πÜ / Other"],ge=[{id:"event-list",label:"Event list",path:pe.officer.eventList,svg:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},{id:"my-event",label:"My event",path:pe.officer.myEvents,svg:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"account-setting",label:"Account setting",path:pe.officer.settings,svg:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}],x={th:{search_placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",status_active:"‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£",status_non_active:"‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£",status_not_open:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î",status_full:"‡πÄ‡∏ï‡πá‡∏°",status_joined:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß",status_resubmit:"‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà",status_pending:"‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",status_completed:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",status_cancelled:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß",status_ended:"‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß",btn_register:"‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô",btn_cancel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",btn_joined:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß",btn_read_more:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",btn_read_less:"‡∏¢‡πà‡∏≠‡∏•‡∏á",btn_send_proof:"‡∏™‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô",btn_resubmit:"‡∏™‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà",upload_title:"‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô",upload_desc:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πà‡∏á",upload_btn:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á",upload_rejected:"‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡∏µ‡∏Å‡∏•‡∏±‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà",cancel_title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°",cancel_desc:"‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",cancel_confirm:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",reason_placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",alert_success:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",alert_cancel_success:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",inbox_title:"‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",inbox_empty:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",mark_all_read:"‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",event_type_single:"‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",event_type_multi:"‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",event_type_challenge:"‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢",daily_checkin:"‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",checkin_progress:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤",days_remaining:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠",day_unit:"‡∏ß‡∏±‡∏ô",participants:"‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°"},en:{search_placeholder:"Search...",status_active:"ACTIVE",status_non_active:"NOT OPEN",status_not_open:"NOT OPEN",status_full:"FULL",status_joined:"JOINED",status_resubmit:"RESUBMIT",status_pending:"PENDING",status_completed:"COMPLETED",status_cancelled:"CANCELLED",status_ended:"ENDED",btn_register:"REGISTRATION",btn_cancel:"CANCEL",btn_joined:"JOINED",btn_read_more:"Read more",btn_read_less:"Read less",btn_send_proof:"SEND PROOF",btn_resubmit:"RESUBMIT PROOF",upload_title:"Upload Proof",upload_desc:"Please upload your slip or result.",upload_btn:"SUBMIT PROOF",upload_rejected:"‚ö†Ô∏è Proof rejected. Please resubmit.",cancel_title:"Cancel Participation",cancel_desc:"Please specify your reason for cancellation.",cancel_confirm:"CONFIRM CANCEL",reason_placeholder:"Specify other reason...",alert_success:"Success",alert_cancel_success:"Cancelled successfully",inbox_title:"Rewards & Notifications",inbox_empty:"No notifications",mark_all_read:"Mark all read",event_type_single:"Single Day",event_type_multi:"Multi Day",event_type_challenge:"Challenge",daily_checkin:"Daily Check-in",checkin_progress:"Progress",days_remaining:"Days Left",day_unit:"days",participants:"Participants"}};function Lt(e){m(a,e),typeof localStorage<"u"&&localStorage.setItem("app_lang",e)}let Ot=null,Nt=null,jt=null;La(async()=>{if(typeof localStorage<"u"){const e=localStorage.getItem("app_lang");e&&m(a,e)}ia(),await We(),qt(),Ot=()=>{document.hidden?Zt():qt()},document.addEventListener("visibilitychange",Ot),Nt=()=>Zt(),jt=()=>qt(),window.addEventListener("offline",Nt),window.addEventListener("online",jt)}),Oa(()=>{W&&clearInterval(W),Zt(),Ot&&document.removeEventListener("visibilitychange",Ot),Nt&&window.removeEventListener("offline",Nt),jt&&window.removeEventListener("online",jt)});function qt(){if(Q)return;const e=async()=>{Q=null,await mt(),Q=setTimeout(e,Dt)};Q=setTimeout(e,Dt)}function Zt(){Q&&(clearTimeout(Q),Q=null)}async function We(){try{Rt&&Rt.abort(),Rt=new AbortController;const e=yt(),n=await fetch(`${ft}/api/events/`,{method:"GET",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},signal:Rt.signal});if(n.status===401){wt();return}if(!n.ok)throw new Error(`Server Error: ${n.status}`);const c=await n.json(),d=new Date,u=c.filter(r=>{if(r.event_end_date&&r.end_time){const l=new Date(`${r.event_end_date}T${r.end_time}`);if(d>l)return!1}else if(r.event_end_date){const l=new Date(r.event_end_date);if(l.setHours(23,59,59,999),d>l)return!1}return!0}).map(r=>{const l=t(E).find(_=>_.id===r.id);return{id:r.id,title:r.title,description:r.description,location:r.location,distance_km:r.distance_km,banner_image_url:Fa(r.banner_image_url)||"",participant_count:r.participant_count,max_participants:r.max_participants,is_active:r.is_active!==void 0?r.is_active:!0,is_published:r.is_published!==void 0?r.is_published:!0,is_full:r.is_full||r.participant_count>=r.max_participants,startDate:r.event_date,endDate:r.event_end_date,end_time:r.end_time||"",isJoined:l?l.isJoined:!1,isJoinedToday:l?l.isJoinedToday:!1,participationId:l?l.participationId:null,participationStatus:l?l.participationStatus:null,participationDate:l?l.participationDate:null,isExpanded:l?l.isExpanded:!1,isUpcoming:l?l.isUpcoming:!1,canRegisterToday:l?l.canRegisterToday:!1,event_type:r.event_type==="multi_day"?"multi_day":"single_day",allow_daily_checkin:!!r.allow_daily_checkin,max_checkins_per_user:typeof r.max_checkins_per_user=="number"?r.max_checkins_per_user:r.max_checkins_per_user?Number(r.max_checkins_per_user):null,checkin_count:l?l.checkin_count:0,completionCount:l?l.completionCount:0}});m(E,u),await mt(),Xe()}catch(e){console.error("Error loading events:",e)}finally{m(_e,!1)}}async function Xe(){const e=yt(),n={"Content-Type":"application/json"};e&&(n.Authorization=`Bearer ${e}`);const c=5,d=[...t(E)];for(let u=0;u<d.length;u+=c){const r=d.slice(u,u+c);(await Promise.allSettled(r.map(async _=>{try{const s=await fetch(`${ft}/api/events/${_.id}/participants`,{headers:n});if(!s.ok)return{eventId:_.id,uniqueCount:_.participant_count||0};const O=await s.json();let T=[];Array.isArray(O)?T=O:O?.participants?T=O.participants:O?.data&&(T=O.data);const A=new Set;return T.forEach(J=>{const k=J.user_id||J.id;k&&A.add(k)}),{eventId:_.id,uniqueCount:A.size}}catch{return{eventId:_.id,uniqueCount:_.participant_count||0}}}))).forEach(_=>{if(_.status==="fulfilled"){const{eventId:s,uniqueCount:O}=_.value,T=t(E).findIndex(A=>A.id===s);T!==-1&&le(E,t(E)[T].participant_count=O)}})}m(E,[...t(E)])}async function mt(){try{if(Gt)return;Gt=!0,Bt&&Bt.abort(),Bt=new AbortController;const e=yt(),n=localStorage.getItem("user_info")||localStorage.getItem("user");if(!e||!n)return;let c;try{const r=JSON.parse(n);c=r.id||r.user_id}catch{return}const d=Date.now(),u=await fetch(`${ft}/api/participations/user/${c}?_=${d}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"Cache-Control":"no-cache"},signal:Bt.signal});if(u.ok){let r=await u.json();const l=new Date;l.setHours(0,0,0,0),m(E,t(E).map(_=>{const s=r.filter(h=>Number(h.event_id)===_.id),O=s.reduce((h,f)=>{const b=f?.status?String(f.status).toUpperCase():"";return b==="CANCELLED"||b==="CANCEL"?h:b==="COMPLETED"?h+1:h},0),T=_.participant_count;let A=null,J=!1;for(const h of s){const f=h.status?h.status.toUpperCase():"";if(f==="CANCELLED"||f==="CANCEL"){J=!0,console.log(`[Event ${_.id}] Skipping CANCELLED record:`,h.id);continue}(!A||h.id>A.id)&&(A=h)}const k=A,z=!!k;let P=!1;if(_.event_type==="multi_day"&&s.length>0){const h=new Date;h.setHours(0,0,0,0);const f=h.toISOString().split("T")[0];console.log(`[Event ${_.id}] Checking isJoinedToday - Today (server): ${f}`),P=s.some(b=>{const H=b.status?b.status.toUpperCase():"";if(H==="CANCELLED"||H==="CANCEL")return!1;const K=b.created_at||b.date;if(K){const F=new Date(K).toISOString().split("T")[0];return console.log(`  - Record ${b.id}: date=${F}, status=${H}, match=${F===f}`),F===f}return!1})}return k?(console.log(`[Event ${_.id}] Active record found:`,k.id,k.status,`isJoinedToday: ${P}`),k.created_at&&console.log(`  - Record date: ${new Date(k.created_at).toISOString()}`)):console.log(`[Event ${_.id}] No active record - can register`),{..._,isJoined:z,isJoinedToday:P,participationId:k?Number(k.id):null,participationStatus:k?k.status.toUpperCase():null,participationDate:k?k.created_at||k.date:null,isUpcoming:_.startDate?new Date(_.startDate)>l:!1,canRegisterToday:_.is_active&&_.is_published&&!z&&!_.is_full,participant_count:T,completionCount:_.completionCount,checkin_count:O,hasCancelledRecord:!z&&J}}))}Dt=15e3}catch(e){Dt=Math.min(Dt*2,6e4),console.error("updateUserStatus error:",e)}finally{Gt=!1}}function me(e){if(e.is_active&&e.is_published)return!1;const n=new Date,c=new Date(n);if(c.setHours(0,0,0,0),!e.startDate)return!1;const d=new Date(e.startDate);if(d.setHours(0,0,0,0),e.endDate){const u=new Date(e.endDate);if(u.setHours(23,59,59,999),c>=d&&n<=u)return!1}return d>c}let bt=U(!1);async function $e(e){if(t(bt))return;if(e.isJoined){I.fire({icon:"info",title:t(a)==="th"?"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß":"One-time Registration",text:t(a)==="th"?"‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ":"You have already registered for this event and cannot register again.",confirmButtonText:"OK",confirmButtonColor:"#3b82f6"}).then(()=>{Ge("officer")});return}if(me(e)){I.fire({icon:"info",title:t(a)==="th"?"‡∏£‡∏≠‡πÄ‡∏õ‡∏¥‡∏î":"Coming Soon",text:t(a)==="th"?`‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á ${ke(e.startDate,"",t(a))}`:`Registration opens on ${ke(e.startDate,"",t(a))}`,confirmButtonText:"OK"});return}const n=new Date;if(e.endDate){const u=new Date(e.endDate);if(u.setHours(23,59,59,999),n>u){I.fire({icon:"warning",title:t(a)==="th"?"‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤":"Registration Closed",text:t(a)==="th"?"‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß":"This event has ended",confirmButtonText:"OK"});return}}if(!e.is_active){I.fire("Unavailable",x[t(a)].status_not_open,"warning");return}m(bt,!0);const c=e.event_type==="multi_day";if((await I.fire({title:c?t(a)==="th"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô?":"Confirm Registration?":t(a)==="th"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ?":"Confirm Daily Registration?",text:c?t(a)==="th"?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° "${e.title}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
(‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô)`:`Register for "${e.title}"?
(System will auto-generate daily codes)`:t(a)==="th"?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° "${e.title}" ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
(‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏à‡∏ö‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)`:`Join "${e.title}" today?
(Must complete today)`,icon:"question",showCancelButton:!0,confirmButtonText:x[t(a)].btn_register,cancelButtonText:x[t(a)].btn_cancel,confirmButtonColor:"#10b981",cancelButtonColor:"#d33"})).isConfirmed)try{const u=yt();if(!u){wt(),m(bt,!1);return}c?await ta(e,u):await ea(`${ft}/api/participations/join`,e,u)}catch(u){console.error("Register Error:",u),I.fire("Error","Connection Error","error")}finally{m(bt,!1)}else m(bt,!1)}async function ta(e,n){const c=await fetch(`${ft}/api/participations/pre-register/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(c.status===401){wt();return}if(c.ok){const d=await c.json();console.log("[PRE-REGISTER SUCCESS]",d),e.isJoined=!0,e.isJoinedToday=!0,e.participationStatus="JOINED",m(E,[...t(E)]),I.fire({icon:"success",title:t(a)==="th"?"‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"Registration Successful!",html:`
          <p>${t(a)==="th"?"‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ":"Today's Code"}: <strong style="font-size:1.5em;color:#10b981">${d.first_code}</strong></p>
          <p style="color:#666;font-size:0.9em">${t(a)==="th"?"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô":"New codes will be generated daily"}</p>
          <p style="color:#666;font-size:0.85em">${t(a)==="th"?"‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà":"Event ends"}: ${d.event_end_date}</p>
        `,confirmButtonText:"OK",confirmButtonColor:"#10b981"}),await mt()}else{const d=c.headers.get("content-type");if(d&&d.includes("application/json")){const u=await c.json();I.fire({icon:"error",title:t(a)==="th"?"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î":"Error",text:u.detail||"Error",confirmButtonText:"OK"})}else I.fire("Error","Server Error","error")}}async function ea(e,n,c){const d=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({event_id:n.id})});if(d.status===401){wt();return}if(d.ok){const u=await d.json(),r=u.id&&n.participationId===u.id;console.log("[JOIN SUCCESS]",{participationId:u.id,wasReactivated:r,joinCode:u.join_code}),n.isJoined=!0,n.isJoinedToday=!0,n.participationId=u.id||null,n.participationStatus="JOINED",m(E,[...t(E)]),I.fire({icon:"success",title:r?t(a)==="th"?"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"Re-registered!":x[t(a)].alert_success,text:`${t(a)==="th"?"‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°":"Join Code"}: ${u.join_code}`,timer:2e3,showConfirmButton:!0}),await mt()}else{const u=d.headers.get("content-type");if(u&&u.includes("application/json")){const l=(await d.json()).detail||"Error";l.includes("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß")?(await mt(),I.fire({icon:"info",title:t(a)==="th"?"‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô":"Notice",text:l,confirmButtonText:"OK"})):I.fire({icon:"error",title:t(a)==="th"?"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î":"Error",text:l,confirmButtonText:"OK"})}else{const r=await d.text();console.warn("Non-JSON API Response:",r),I.fire("Failed","Server Error","error")}}}function aa(e){q=e,m(V,""),m(dt,""),m(Vt,!0)}function be(){m(Vt,!1),q=null}async function sa(){if(!q)return;let e=t(V);if(t(V).includes("Other")||t(V).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")){if(!t(dt).trim()){I.fire({icon:"warning",title:t(a)==="th"?"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°":"Reason not specified",text:t(a)==="th"?"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°":"Please provide more details",confirmButtonColor:"#f59e0b"});return}e=t(dt)}try{const n=yt();if(!n){wt();return}if(!q.participationId&&(await mt(),!q.participationId))return;const c=await fetch(`${ft}/api/participations/${q.participationId}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({cancellation_reason:e})});if(c.ok)q.isJoined=!1,q.participationId=null,q.participationStatus=null,q.participant_count=Math.max(0,q.participant_count-1),m(E,[...t(E)]),I.fire({icon:"success",title:x[t(a)].alert_cancel_success,timer:1500,showConfirmButton:!1}),be();else{const d=await c.json();I.fire("Failed",d.detail||"Error","error")}}catch{I.fire("Error","Connection Error","error")}}function ye(){m(he,!1),m(gt,null)}function na(e){const n=e.target;if(n.files&&n.files[0]){m(Kt,n.files[0]);const c=new FileReader;c.onload=d=>{m(Et,d.target?.result)},c.readAsDataURL(n.files[0])}}async function oa(){if(!(!t(gt)||!t(Kt)))try{I.fire({icon:"success",title:x[t(a)].alert_success,timer:2e3,showConfirmButton:!1}),le(gt,t(gt).participationStatus="proof_submitted"),m(E,[...t(E)]),ye()}catch{I.fire("Error","Failed","error")}}function ia(){W&&clearInterval(W);const e=yt();if(!e){m(Mt,"00:00:00");return}try{const n=e.split(".")[1],d=JSON.parse(atob(n)).exp*1e3;we(d),W=setInterval(()=>{we(d)},1e3)}catch{}}function we(e){const n=Date.now(),c=e-n;if(c<=0)W&&clearInterval(W),m(Mt,"00:00:00"),wt();else{const d=Math.floor(c/1e3),u=Math.floor(d/3600),r=Math.floor(d%3600/60),l=d%60;m(Mt,`${u.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`)}}function yt(){if(typeof localStorage>"u")return"";const e=localStorage.getItem("access_token")||"";return e||console.warn("No access token found in localStorage"),e}async function wt(){fe||(fe=!0,typeof localStorage<"u"&&localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),Ke.logout(),W&&clearInterval(W),Q&&(clearTimeout(Q),Q=null),await I.fire({icon:"error",title:"Session Expired",text:"Expired",timer:3e3,showConfirmButton:!1,allowOutsideClick:!1}),window.location.href="/auth/login")}function ra(e,n,c){if(!e)return"-";const d=c==="th"?"th-TH":"en-GB",u={day:"numeric",month:"long",year:"numeric",timeZone:"Asia/Bangkok"},l=new Date(e).toLocaleDateString(d,u);if(!n)return l;const s=new Date(n).toLocaleDateString(d,u);return l===s?l:`${l} - ${s}`}function la(e,n,c){if(!e)return"-";const d=new Date(e),u=n?new Date(n):null,r={hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Bangkok"},l=d.toLocaleTimeString("en-GB",r),_=u?u.toLocaleTimeString("en-GB",r):"";return c==="th"?u?`${l} - ${_} ‡∏ô.`:`${l} ‡∏ô.`:u?`${l} - ${_}`:`${l}`}function ke(e,n="",c="th"){if(!e)return"-";const d=c==="th"?"th-TH":"en-GB",u={day:"numeric",month:"short",year:"numeric",timeZone:"Asia/Bangkok"},l=new Date(e).toLocaleDateString(d,u);if(!n)return l;const s=new Date(n).toLocaleDateString(d,u);return l===s?l:`${l} - ${s}`}function ca(e){const n=t(xt)[e].id,c=t(E).findIndex(d=>d.id===n);c!==-1&&(le(E,t(E)[c].isExpanded=!t(E)[c].isExpanded),m(E,[...t(E)]))}function Ce(e,n){m(Ft,e),m(at,!1),za(n)}function xe(){m(at,!1),typeof localStorage<"u"&&localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),Ke.logout(),window.location.href="/auth/login"}let Qt=U(""),It=U(null);He(()=>(t(It),t(ht)),()=>{t(It)&&clearTimeout(t(It)),m(It,setTimeout(()=>{m(Qt,t(ht).toLowerCase().trim())},250))}),He(()=>(t(E),t(Qt)),()=>{m(xt,t(E).filter(e=>{if(e.endDate){const c=new Date,d=new Date(e.endDate);if(d.setHours(23,59,59,999),c>d)return!1}if(e.isJoined&&!e.isJoinedToday)return!1;const n=t(Qt);return n?e.title.toLowerCase().includes(n)||e.location.toLowerCase().includes(n)||e.description.toLowerCase().includes(n):!0}))}),Na(),Ja();var Yt=Cs(),Wt=i(Yt),De=i(Wt),Xt=i(De),Ee=v(i(Xt),2);zt(Ee,5,()=>ge,Ht,(e,n)=>{var c=Ga();let d;var u=i(c),r=i(u);o(u);var l=v(u,2),_=i(l,!0);o(l),o(c),S(()=>{d=lt(c,1,"menu-btn svelte-10685s1",null,d,{active:t(Ft)===t(n).id}),Tt(r,"d",(t(n),p(()=>t(n).svg))),w(_,(t(n),p(()=>t(n).label)))}),L("click",c,()=>Ce(t(n).id,t(n).path)),g(e,c)}),o(Ee),o(Xt);var $t=v(Xt,2),Se=i($t),te=v(i(Se),2);de(te),o(Se),o($t);var Te=v($t,2),ee=i(Te),da=i(ee,!0);o(ee);var ae=v(ee,2),se=i(ae);let Me;var Re=v(se,4);let Be;o(ae);var Le=v(ae,2),ua=v(Le,2);o(Te),o(De),o(Wt);var Oe=v(Wt,2);{var va=e=>{var n=Ka(),c=rt(n),d=v(c,2),u=i(d),r=v(i(u));o(u);var l=v(u,2),_=i(l);de(_),o(l);var s=v(l,2),O=i(s);zt(O,1,()=>ge,Ht,(f,b)=>{var H=Va();let K;var F=i(H),kt=i(F);o(F);var oe=v(F);o(H),S(()=>{K=lt(H,1,"drawer-item svelte-10685s1",null,K,{active:t(Ft)===t(b).id}),Tt(kt,"d",(t(b),p(()=>t(b).svg))),w(oe,` ${t(b),p(()=>t(b).label)??""}`)}),L("click",H,()=>Ce(t(b).id,t(b).path)),g(f,H)});var T=v(O,2),A=v(i(T),2),J=i(A);let k;var z=v(J,2);let P;o(A),o(T),o(s);var h=v(s,2);o(d),S(()=>{k=lt(J,1,"svelte-10685s1",null,k,{active:t(a)==="th"}),P=lt(z,1,"svelte-10685s1",null,P,{active:t(a)==="en"})}),L("click",c,()=>m(at,!1)),L("keydown",c,f=>{(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&m(at,!1)}),ct(3,c,()=>ue,()=>({duration:200})),L("click",r,()=>m(at,!1)),ce(_,()=>t(ht),f=>m(ht,f)),L("click",J,()=>Lt("th")),L("click",z,()=>Lt("en")),L("click",h,xe),ct(3,d,()=>ve,()=>({axis:"x",duration:300})),g(e,n)};R(Oe,e=>{t(at)&&e(va)})}var ne=v(Oe,2),Ne=i(ne),pa=v(i(Ne),2);{var _a=e=>{var n=qa();g(e,n)},fa=e=>{var n=_t(),c=rt(n);{var d=r=>{var l=Za();g(r,l)},u=r=>{var l=_s();zt(l,5,()=>t(xt),Ht,(_,s,O)=>{var T=ps(),A=i(T);Aa(A,(D,C)=>Pa?.(D,C),()=>t(s).banner_image_url);var J=v(A,2),k=i(J),z=i(k),P=i(z,!0);o(z);var h=v(z,2),f=i(h);{var b=D=>{var C=Wa(),G=i(C);{var X=B=>{var N=Qa();pt(),g(B,N)},st=B=>{var N=Ya();pt(),g(B,N)};R(G,B=>{t(a)==="th"?B(X):B(st,!1)})}o(C),g(D,C)},H=D=>{var C=_t(),G=rt(C);{var X=B=>{var N=Xa(),Y=i(N,!0);o(N),S(()=>w(Y,(t(a),p(()=>x[t(a)].status_not_open)))),g(B,N)},st=B=>{var N=_t(),Y=rt(N);{var ut=M=>{var j=$a(),Z=i(j,!0);o(j),S(()=>w(Z,(t(a),p(()=>x[t(a)].status_pending)))),g(M,j)},$=M=>{var j=ts(),Z=i(j,!0);o(j),S(()=>w(Z,(t(a),p(()=>x[t(a)].status_active)))),g(M,j)};R(Y,M=>{t(s),p(()=>t(s).participationStatus==="CHECKED_IN")?M(ut):M($,!1)},!0)}g(B,N)};R(G,B=>{t(s),p(()=>!t(s).is_active)?B(X):B(st,!1)},!0)}g(D,C)};R(f,D=>{t(s),p(()=>!t(s).is_published)?D(b):D(H,!1)})}var K=v(f,2),F=i(K);let kt;var oe=i(F,!0);o(F);var ba=v(F,2);{var ya=D=>{var C=es(),G=i(C,!0);o(C),S(()=>w(G,(t(a),p(()=>x[t(a)].daily_checkin)))),g(D,C)};R(ba,D=>{t(s),p(()=>t(s).event_type==="multi_day"&&t(s).allow_daily_checkin)&&D(ya)})}o(K);var Ie=v(K,2),wa=v(i(Ie));o(Ie),o(h),o(k);var At=v(k,2);let Ae;var ka=i(At,!0);o(At);var Pe=v(At,2);{var Ca=D=>{var C=ss(),G=i(C),X=i(G),st=v(i(X),2),B=i(st,!0);o(st),o(X);var N=v(X,2),Y=v(i(N),2),ut=i(Y,!0);o(Y),o(N);var $=v(N,2),M=v(i($),2),j=i(M,!0);o(M),o($);var Z=v($,2),Ut=v(i(Z),2),ie=i(Ut);o(Ut),o(Z);var nt=v(Z,2);{var ot=tt=>{var vt=as(),Jt=v(i(vt),2),it=i(Jt);o(Jt),o(vt),S(()=>w(it,`${t(a),p(()=>x[t(a)].checkin_progress)??""}: ${t(s),p(()=>t(s).checkin_count)??""}/${t(s),p(()=>t(s).max_checkins_per_user??"-")??""} ${t(a),p(()=>x[t(a)].day_unit)??""}`)),g(tt,vt)};R(nt,tt=>{t(s),p(()=>t(s).event_type==="multi_day"&&t(s).allow_daily_checkin)&&tt(ot)})}o(G),pt(2),o(C),S((tt,vt)=>{w(B,(t(s),p(()=>t(s).location))),w(ut,tt),w(j,vt),w(ie,`${t(s),p(()=>t(s).distance_km)??""} KM`)},[()=>(t(s),t(a),p(()=>ra(t(s).startDate,t(s).endDate,t(a)))),()=>(t(s),t(a),p(()=>la(t(s).startDate,t(s).endDate,t(a))))]),ct(3,C,()=>ve,()=>({duration:300})),g(D,C)};R(Pe,D=>{t(s),p(()=>t(s).isExpanded)&&D(Ca)})}var Ue=v(Pe,2),Pt=i(Ue),xa=i(Pt,!0);o(Pt);var Je=v(Pt,2),ze=i(Je);{var Da=D=>{var C=ns(),G=i(C,!0);o(C),S(()=>w(G,t(a)==="th"?"‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡πâ‡∏ß":"‚úÖ Registered")),L("click",C,()=>Ge("officer")),g(D,C)},Ea=D=>{var C=_t(),G=rt(C);{var X=B=>{var N=rs(),Y=i(N);{var ut=M=>{var j=os();pt(),g(M,j)},$=M=>{var j=is();pt(),g(M,j)};R(Y,M=>{t(a)==="th"?M(ut):M($,!1)})}o(N),g(B,N)},st=B=>{var N=_t(),Y=rt(N);{var ut=M=>{var j=ls(),Z=i(j,!0);o(j),S(()=>w(Z,(t(a),p(()=>x[t(a)].status_not_open)))),g(M,j)},$=M=>{var j=_t(),Z=rt(j);{var Ut=nt=>{var ot=cs(),tt=i(ot,!0);o(ot),S(()=>w(tt,(t(a),p(()=>x[t(a)].status_full)))),g(nt,ot)},ie=nt=>{var ot=_t(),tt=rt(ot);{var vt=it=>{var et=ds(),re=i(et,!0);o(et),S(()=>w(re,t(a)==="th"?"‚è≥ ‡∏£‡∏≠‡πÄ‡∏õ‡∏¥‡∏î":"‚è≥ Coming Soon")),g(it,et)},Jt=it=>{var et=us(),re=i(et);{var Ma=Ct=>{var St=Fe();S(()=>w(St,t(a)==="th"?"üîÑ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á":"üîÑ Register Again")),g(Ct,St)},Ra=Ct=>{var St=Fe();S(()=>w(St,t(a)==="th"?"üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£":"üìù Register")),g(Ct,St)};R(re,Ct=>{t(s),p(()=>t(s).hasCancelledRecord)?Ct(Ma):Ct(Ra,!1)})}o(et),S(()=>et.disabled=t(bt)),L("click",et,()=>$e(t(s))),g(it,et)};R(tt,it=>{t(s),p(()=>me(t(s)))?it(vt):it(Jt,!1)},!0)}g(nt,ot)};R(Z,nt=>{t(s),p(()=>t(s).is_full)?nt(Ut):nt(ie,!1)},!0)}g(M,j)};R(Y,M=>{t(s),p(()=>!t(s).is_active)?M(ut):M($,!1)},!0)}g(B,N)};R(G,B=>{t(s),p(()=>!t(s).is_published)?B(X):B(st,!1)},!0)}g(D,C)};R(ze,D=>{t(s),p(()=>t(s).isJoined)?D(Da):D(Ea,!1)})}var Sa=v(ze,2);{var Ta=D=>{var C=vs(),G=i(C,!0);o(C),S(()=>w(G,t(a)==="th"?"‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å":"‚ùå Cancel")),L("click",C,()=>aa(t(s))),g(D,C)};R(Sa,D=>{t(s),p(()=>t(s).isJoined&&t(s).checkin_count===0)&&D(Ta)})}o(Je),o(Ue),o(J),o(T),S(()=>{w(P,(t(s),p(()=>t(s).title))),kt=lt(F,1,"type-badge svelte-10685s1",null,kt,{multi:t(s).event_type==="multi_day"}),w(oe,(t(s),t(a),p(()=>t(s).event_type==="multi_day"?x[t(a)].event_type_multi:x[t(a)].event_type_single))),w(wa,` ${t(s),p(()=>t(s).participant_count)??""}/${t(s),p(()=>t(s).max_participants)??""} ${t(a),p(()=>x[t(a)].participants)??""}`),Ae=lt(At,1,"card-desc svelte-10685s1",null,Ae,{expanded:t(s).isExpanded}),w(ka,(t(s),p(()=>t(s).description))),w(xa,(t(s),t(a),p(()=>t(s).isExpanded?x[t(a)].btn_read_less:x[t(a)].btn_read_more)))}),L("click",Pt,()=>ca(O)),g(_,T)}),o(l),g(r,l)};R(c,r=>{t(xt),p(()=>t(xt).length===0)?r(d):r(u,!1)})}g(e,n)};R(pa,e=>{t(_e)?e(_a):e(fa,!1)})}pt(2),o(Ne),o(ne);var je=v(ne,2);{var ha=e=>{var n=bs(),c=i(n),d=i(c),u=v(d,2),r=i(u),l=i(r,!0);o(r);var _=v(r,2);{var s=h=>{var f=fs(),b=i(f,!0);o(f),S(()=>w(b,(t(a),p(()=>x[t(a)].upload_rejected)))),g(h,f)},O=h=>{var f=hs(),b=i(f,!0);o(f),S(()=>w(b,(t(a),p(()=>x[t(a)].upload_desc)))),g(h,f)};R(_,h=>{t(gt),p(()=>t(gt)?.participationStatus==="REJECTED")?h(s):h(O,!1)})}var T=v(_,2),A=i(T);{var J=h=>{var f=gs(),b=i(f);pt(2),o(f),L("change",b,na),g(h,f)},k=h=>{var f=ms(),b=i(f),H=v(b,2);o(f),S(()=>Tt(b,"src",t(Et))),L("click",H,()=>{m(Et,null),m(Kt,null)}),g(h,f)};R(A,h=>{t(Et)?h(k,!1):h(J)})}o(T);var z=v(T,2),P=i(z,!0);o(z),o(u),o(c),o(n),S(()=>{w(l,(t(a),p(()=>x[t(a)].upload_title))),z.disabled=!t(Et),w(P,(t(a),p(()=>x[t(a)].upload_btn)))}),L("click",d,ye),L("click",z,oa),ct(3,c,()=>Ve,()=>({duration:250,start:.9})),ct(3,n,()=>ue,()=>({duration:200})),g(e,n)};R(je,e=>{t(he)&&e(ha)})}var ga=v(je,2);{var ma=e=>{var n=ks(),c=i(n),d=i(c),u=v(d,2),r=i(u),l=i(r,!0);o(r);var _=v(r,2),s=i(_,!0);o(_);var O=v(_,2);zt(O,5,()=>Ye,Ht,(P,h)=>{var f=ys(),b=i(f);de(b);var H,K=v(b,2),F=i(K,!0);o(K),o(f),S(()=>{H!==(H=t(h))&&(b.value=(b.__value=t(h))??""),w(F,t(h))}),Ua(Qe,[],b,()=>(t(h),t(V)),kt=>m(V,kt)),g(P,f)}),o(O);var T=v(O,2);{var A=P=>{var h=ws(),f=i(h);Ia(f),o(h),S(()=>Tt(f,"placeholder",(t(a),p(()=>x[t(a)].reason_placeholder)))),ce(f,()=>t(dt),b=>m(dt,b)),ct(3,h,()=>ve),g(P,h)};R(T,P=>{t(V),p(()=>t(V).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")||t(V).includes("Other"))&&P(A)})}var J=v(T,2),k=i(J),z=i(k,!0);o(k),o(J),o(u),o(c),o(n),S(P=>{w(l,(t(a),p(()=>x[t(a)].cancel_title))),w(s,(t(a),p(()=>x[t(a)].cancel_desc))),k.disabled=P,w(z,(t(a),p(()=>x[t(a)].cancel_confirm)))},[()=>(t(V),t(dt),p(()=>!t(V)||(t(V).includes("Other")||t(V).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ"))&&!t(dt).trim()))]),L("click",d,be),L("click",k,sa),ct(3,c,()=>Ve,()=>({duration:250,start:.9})),ct(3,n,()=>ue,()=>({duration:200})),g(e,n)};R(ga,e=>{t(Vt)&&e(ma)})}o(Yt),S(()=>{Tt(te,"placeholder",(t(a),p(()=>x[t(a)].search_placeholder))),w(da,t(Mt)),Me=lt(se,1,"svelte-10685s1",null,Me,{active:t(a)==="th"}),Be=lt(Re,1,"svelte-10685s1",null,Be,{active:t(a)==="en"})}),ce(te,()=>t(ht),e=>m(ht,e)),L("click",se,()=>Lt("th")),L("click",Re,()=>Lt("en")),L("click",Le,xe),L("click",ua,()=>m(at,!t(at))),g(qe,Yt),ja()}export{Us as component};
