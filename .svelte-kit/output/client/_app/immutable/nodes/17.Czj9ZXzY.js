import"../chunks/DsnmJJEf.js";import"../chunks/dQoSI2p6.js";import{$ as He,a7 as Ye,a8 as ve,a9 as Ie,a6 as f,aa as g,ab as ie,a2 as n,a3 as Je,f as e,m as S,ad as t,af as i,i as h,ae as a,o as r,ag as l,a0 as le,a1 as O,y as Qe}from"../chunks/BzFeUjkD.js";import{e as $e,i as Ce}from"../chunks/CFC0_nPK.js";import{i as x}from"../chunks/yr0HFLoq.js";import{s as V}from"../chunks/Dx5pcVVY.js";import{s as Ke}from"../chunks/COAQJPqk.js";import{t as me,s as Ue,a as De}from"../chunks/C9WUvhPB.js";import{i as Ve}from"../chunks/B4hL2_NH.js";import{f as We,q as Xe,e as Ze}from"../chunks/Fm7SvFED.js";var ea=f('<div class="stats-container svelte-8bf3s0"><div class="stat-card svelte-8bf3s0"><div class="stat-value svelte-8bf3s0"> </div> <div class="stat-label svelte-8bf3s0"> </div></div> <div class="stat-card svelte-8bf3s0"><div class="stat-value svelte-8bf3s0"> </div> <div class="stat-label svelte-8bf3s0"> </div></div> <div class="stat-card svelte-8bf3s0"><div class="stat-value svelte-8bf3s0"> </div> <div class="stat-label svelte-8bf3s0"> </div></div></div>'),aa=f('<span class="badge-qualified svelte-8bf3s0">âœ…</span>'),ta=f('<button><div class="dropdown-item-content svelte-8bf3s0"><div class="dropdown-item-name svelte-8bf3s0"> </div> <div class="dropdown-item-meta svelte-8bf3s0"> </div></div> <!></button>'),sa=f('<div class="dropdown-menu svelte-8bf3s0"><div class="dropdown-inner svelte-8bf3s0"></div></div>'),ra=f('<div class="event-selector-wrapper svelte-8bf3s0"><div class="event-selector-container svelte-8bf3s0"><button><span class="event-name svelte-8bf3s0"> </span> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div></div>'),va=f('<div style="padding: 40px; color: #9ca3af;"> </div>'),ia=f('<div style="padding: 40px; color: #ef4444;"> </div>'),la=f('<div style="padding: 40px; color: #9ca3af;"> </div>'),oa=f('<div class="step step-done svelte-8bf3s0"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div>'),da=f('<div class="step step-locked svelte-8bf3s0"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></div>'),na=f("<div></div>"),ca=f('<div class="step-wrapper svelte-8bf3s0"><!></div> <!>',1),fa=f('<div class="rank-badge svelte-8bf3s0"> </div>'),_a=f('<div class="reward-display svelte-8bf3s0"><div class="reward-label svelte-8bf3s0"> </div> <div class="reward-name svelte-8bf3s0"> </div></div>'),pa=f('<p class="status-badge finalized svelte-8bf3s0"> </p>'),ua=f('<p class="status-badge pending svelte-8bf3s0"> </p>'),ga=f('<div><h3 class="congrats-text svelte-8bf3s0"> </h3> <h3 class="congrats-text svelte-8bf3s0"> </h3> <!> <!> <!></div>'),ba=f('<h3 class="status-title locked svelte-8bf3s0"> </h3> <p class="desc-text svelte-8bf3s0"> </p>',1),ma=f('<h3 class="status-title progress svelte-8bf3s0"> </h3> <p class="desc-text svelte-8bf3s0"> </p> <p class="status-badge active svelte-8bf3s0"> </p>',1),ha=f('<h3 class="status-title expired svelte-8bf3s0"> </h3> <p class="desc-text svelte-8bf3s0"> </p>',1),xa=f('<div class="stepper-container svelte-8bf3s0"></div> <div class="progress-bar-container svelte-8bf3s0"><div class="progress-bar svelte-8bf3s0"><div></div></div> <div class="progress-text-inline svelte-8bf3s0"> </div></div> <div class="message-area svelte-8bf3s0"><!></div>',1),wa=f('<div class="app-screen svelte-8bf3s0"><div class="glass-header svelte-8bf3s0"><a href="/student/event-list" class="back-btn svelte-8bf3s0" aria-label="Back"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></a> <h1 class="page-title svelte-8bf3s0"> </h1> <div class="lang-toggle svelte-8bf3s0"><button>TH</button> <span class="sep svelte-8bf3s0">|</span> <button>EN</button></div></div> <div class="scroll-container svelte-8bf3s0"><div class="content-wrapper svelte-8bf3s0"><!> <!> <div class="reward-card svelte-8bf3s0"><!></div></div></div></div>');function Da(Fe,Re){He(Re,!1);const W=S(),Y=S(),oe=S(),Z=S();let de=S(!0),te=S(null),k=S(null),o=S(null),X=S(!1),s=S("th");const _={th:{title:"à¸£à¸²à¸‡à¸§à¸±à¸¥à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™",loading:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥...",noData:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Leaderboard",selectEvent:"à¹€à¸¥à¸·à¸­à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡",totalEvents:"à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”",completed:"à¸œà¹ˆà¸²à¸™à¹à¸¥à¹‰à¸§",rewards:"à¸£à¸²à¸‡à¸§à¸±à¸¥",pending:"à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£",progress:"à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²",times:"à¸„à¸£à¸±à¹‰à¸‡",rank:"à¸­à¸±à¸™à¸”à¸±à¸š",qualified:"à¸œà¹ˆà¸²à¸™à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹à¸¥à¹‰à¸§",stillQualify:"à¸¢à¸±à¸‡à¸—à¸³à¹„à¸”à¹‰à¸•à¹ˆà¸­",expired:"à¸«à¸¡à¸”à¹€à¸§à¸¥à¸²à¹à¸¥à¹‰à¸§",finalized:"à¸›à¸£à¸°à¸à¸²à¸¨à¸œà¸¥à¹à¸¥à¹‰à¸§",notFinalized:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸›à¸£à¸°à¸à¸²à¸¨à¸œà¸¥",congrats:"à¸¢à¸´à¸™à¸”à¸µà¸”à¹‰à¸§à¸¢!",youQualified:"à¸„à¸¸à¸“à¸œà¹ˆà¸²à¸™à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¹à¸¥à¹‰à¸§!",keepGoing:"à¸ªà¸¹à¹‰à¹† à¸™à¸°!",locked:"à¸¥à¹‡à¸­à¸",needMore:"à¹€à¸«à¸¥à¸·à¸­à¸­à¸µà¸",toQualify:"à¹€à¸žà¸·à¹ˆà¸­à¸œà¹ˆà¸²à¸™à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´",yourReward:"à¸£à¸²à¸‡à¸§à¸±à¸¥à¸‚à¸­à¸‡à¸„à¸¸à¸“",notStarted:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹€à¸£à¸´à¹ˆà¸¡"},en:{title:"Monthly Rewards",loading:"Loading data...",noData:"No Leaderboard Data",selectEvent:"Select Event",totalEvents:"Total Events",completed:"Completed",rewards:"Rewards",pending:"Pending",progress:"Progress",times:"times",rank:"Rank",qualified:"Qualified",stillQualify:"Can still qualify",expired:"Expired",finalized:"Finalized",notFinalized:"Not Finalized",congrats:"Congratulations!",youQualified:"You have qualified!",keepGoing:"Keep Going!",locked:"Locked",needMore:"Need",toQualify:"more to qualify",yourReward:"Your Reward",notStarted:"Not Started"}};async function Se(){h(de,!0),h(te,null);try{const v=await We();if(h(k,v),v.leaderboards.length>0){const b=v.leaderboards.find(y=>!y.is_finalized&&y.can_still_qualify);h(o,b||v.leaderboards[0])}}catch(v){console.error("Error loading leaderboards:",v),h(te,v instanceof Error?v.message:"Unknown error")}finally{h(de,!1)}}function Be(v){h(o,v),h(X,!1)}function he(v){h(s,v)}Ye(()=>{const v=localStorage.getItem("lang");(v==="th"||v==="en")&&h(s,v),Se()}),ve(()=>e(o),()=>{h(W,e(o)?.current_completions||0)}),ve(()=>e(o),()=>{h(Y,e(o)?.required_completions||0)}),ve(()=>e(o),()=>{h(oe,e(o)?.qualified||!1)}),ve(()=>e(o),()=>{h(Z,e(o)?.progress_percentage||0)}),Ie(),Ve();var ne=wa(),ce=t(ne),fe=i(t(ce),2),Ne=t(fe,!0);a(fe);var xe=i(fe,2),_e=t(xe);let we;var ke=i(_e,4);let ye;a(xe),a(ce);var qe=i(ce,2),Ee=t(qe),Me=t(Ee);{var Ge=v=>{var b=ea(),y=t(b),L=t(y),I=t(L,!0);a(L);var Q=i(L,2),F=t(Q,!0);a(Q),a(y);var B=i(y,2),J=t(B),K=t(J,!0);a(J);var w=i(J,2),$=t(w,!0);a(w),a(B);var R=i(B,2),p=t(R),C=t(p,!0);a(p);var N=i(p,2),P=t(N,!0);a(N),a(R),a(b),g(()=>{l(I,(e(k),r(()=>e(k).total_leaderboards))),l(F,(e(s),r(()=>_[e(s)].totalEvents))),l(K,(e(k),r(()=>e(k).completed_leaderboards))),l($,(e(s),r(()=>_[e(s)].completed))),l(C,(e(k),r(()=>e(k).rewards_received))),l(P,(e(s),r(()=>_[e(s)].rewards)))}),n(v,b)};x(Me,v=>{e(k)&&v(Ge)})}var ze=i(Me,2);{var je=v=>{var b=ra(),y=t(b),L=t(y),I=t(L),Q=t(I,!0);a(I);var F=i(I,2);a(L);var B=i(L,2);{var J=K=>{var w=sa(),$=t(w);$e($,5,()=>(e(k),r(()=>e(k).leaderboards)),Ce,(R,p)=>{var C=ta(),N=t(C),P=t(N),pe=t(P,!0);a(P);var ee=i(P,2),ue=t(ee);a(ee),a(N);var ge=i(N,2);{var be=m=>{var E=aa();n(m,E)};x(ge,m=>{e(p),r(()=>e(p).qualified)&&m(be)})}a(C),g(m=>{V(C,1,`dropdown-item ${e(p),e(o),r(()=>e(p).config_id===e(o)?.config_id?"active":"")??""}`,"svelte-8bf3s0"),l(pe,(e(p),r(()=>e(p).event_name))),l(ue,`${e(p),r(()=>e(p).current_completions)??""}/${e(p),r(()=>e(p).required_completions)??""} (${m??""}%)`)},[()=>(e(p),r(()=>e(p).progress_percentage.toFixed(0)))]),ie("click",C,()=>Be(e(p))),n(R,C)}),a($),a(w),me(3,w,()=>Ue,()=>({duration:300,easing:Xe,axis:"y"})),n(K,w)};x(B,K=>{e(X)&&K(J)})}a(y),a(b),g(()=>{V(L,1,`event-btn ${e(X)?"open":""}`,"svelte-8bf3s0"),l(Q,(e(o),e(s),r(()=>e(o)?.event_name||_[e(s)].selectEvent))),V(F,0,`arrow-icon ${e(X)?"rotate":""}`,"svelte-8bf3s0")}),ie("click",L,()=>h(X,!e(X))),n(v,b)};x(ze,v=>{e(k),r(()=>e(k)&&e(k).leaderboards.length>0)&&v(je)})}var Le=i(ze,2),Ae=t(Le);{var Oe=v=>{var b=va(),y=t(b,!0);a(b),g(()=>l(y,(e(s),r(()=>_[e(s)].loading)))),n(v,b)},Pe=v=>{var b=le(),y=O(b);{var L=Q=>{var F=ia(),B=t(F,!0);a(F),g(()=>l(B,e(te))),n(Q,F)},I=Q=>{var F=le(),B=O(F);{var J=w=>{var $=la(),R=t($,!0);a($),g(()=>l(R,(e(s),r(()=>_[e(s)].noData)))),n(w,$)},K=w=>{var $=xa(),R=O($);$e(R,5,()=>(e(Y),r(()=>Array(Math.min(e(Y),5)))),Ce,(m,E,G)=>{const ae=Qe(()=>G<e(W)),U=Qe(()=>e(W)>G+1);var D=ca(),M=O(D),j=t(M);{var T=u=>{var d=oa();me(1,d,()=>De,()=>({duration:500,easing:Ze,start:.5})),n(u,d)},H=u=>{var d=da();n(u,d)};x(j,u=>{e(ae)?u(T):u(H,!1)})}a(M);var z=i(M,2);{var A=u=>{var d=na();g(()=>V(d,1,`line ${e(U)?"line-active":""}`,"svelte-8bf3s0")),n(u,d)};x(z,u=>{e(Y),r(()=>G<Math.min(e(Y),5)-1)&&u(A)})}n(m,D)}),a(R);var p=i(R,2),C=t(p),N=t(C);a(C);var P=i(C,2),pe=t(P);a(P),a(p);var ee=i(p,2),ue=t(ee);{var ge=m=>{var E=ga(),G=t(E),ae=t(G);a(G);var U=i(G,2),D=t(U,!0);a(U);var M=i(U,2);{var j=d=>{var c=fa(),q=t(c);a(c),g(()=>l(q,`${e(s),r(()=>_[e(s)].rank)??""} #${e(o),r(()=>e(o).rank)??""}`)),n(d,c)};x(M,d=>{e(o),r(()=>e(o).rank)&&d(j)})}var T=i(M,2);{var H=d=>{var c=_a(),q=t(c),se=t(q);a(q);var re=i(q,2),Te=t(re);a(re),a(c),g(()=>{l(se,`${e(s),r(()=>_[e(s)].yourReward)??""}:`),l(Te,`ðŸŽ ${e(o),r(()=>e(o).reward_name)??""}`)}),n(d,c)};x(T,d=>{e(o),r(()=>e(o).reward_name)&&d(H)})}var z=i(T,2);{var A=d=>{var c=pa(),q=t(c);a(c),g(()=>l(q,`âœ… ${e(s),r(()=>_[e(s)].finalized)??""}`)),n(d,c)},u=d=>{var c=ua(),q=t(c);a(c),g(()=>l(q,`â³ ${e(s),r(()=>_[e(s)].notFinalized)??""}`)),n(d,c)};x(z,d=>{e(o),r(()=>e(o).is_finalized)?d(A):d(u,!1)})}a(E),g(()=>{l(ae,`ðŸŽ‰ ${e(s),r(()=>_[e(s)].congrats)??""}`),l(D,(e(s),r(()=>_[e(s)].youQualified)))}),me(1,E,()=>De),n(m,E)},be=m=>{var E=le(),G=O(E);{var ae=D=>{var M=ba(),j=O(M),T=t(j,!0);a(j);var H=i(j,2),z=t(H,!0);a(H),g(()=>{l(T,(e(s),r(()=>_[e(s)].locked))),l(z,e(s)==="th"?"à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¹€à¸žà¸·à¹ˆà¸­à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸à¸£à¸²à¸‡à¸§à¸±à¸¥":"Join events to unlock rewards")}),n(D,M)},U=D=>{var M=le(),j=O(M);{var T=z=>{var A=ma(),u=O(A),d=t(u,!0);a(u);var c=i(u,2),q=t(c);a(c);var se=i(c,2),re=t(se);a(se),g(()=>{l(d,(e(s),r(()=>_[e(s)].keepGoing))),l(q,`${e(s),r(()=>_[e(s)].needMore)??""} ${e(Y)-e(W)} ${e(s),r(()=>_[e(s)].times)??""} ${e(s),r(()=>_[e(s)].toQualify)??""}`),l(re,`ðŸ”¥ ${e(s),r(()=>_[e(s)].stillQualify)??""}`)}),n(z,A)},H=z=>{var A=ha(),u=O(A),d=t(u,!0);a(u);var c=i(u,2),q=t(c,!0);a(c),g(()=>{l(d,(e(s),r(()=>_[e(s)].expired))),l(q,e(s)==="th"?"à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸™à¸µà¹‰à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¹à¸¥à¹‰à¸§":"This event has ended")}),n(z,A)};x(j,z=>{e(o),r(()=>e(o).can_still_qualify)?z(T):z(H,!1)},!0)}n(D,M)};x(G,D=>{e(W)===0?D(ae):D(U,!1)},!0)}n(m,E)};x(ue,m=>{e(oe)?m(ge):m(be,!1)})}a(ee),g((m,E)=>{V(N,1,`progress-fill ${e(oe)?"completed":""}`,"svelte-8bf3s0"),Ke(N,`width: ${m??""}%`),l(pe,`${e(W)??""}/${e(Y)??""} ${e(s),r(()=>_[e(s)].times)??""} (${E??""}%)`)},[()=>(e(Z),r(()=>Math.min(100,e(Z)))),()=>(e(Z),r(()=>e(Z).toFixed(0)))]),n(w,$)};x(B,w=>{e(o)?w(K,!1):w(J)},!0)}n(Q,F)};x(y,Q=>{e(te)?Q(L):Q(I,!1)},!0)}n(v,b)};x(Ae,v=>{e(de)?v(Oe):v(Pe,!1)})}a(Le),a(Ee),a(qe),a(ne),g(()=>{l(Ne,(e(s),r(()=>_[e(s)].title))),we=V(_e,1,"svelte-8bf3s0",null,we,{active:e(s)==="th"}),ye=V(ke,1,"svelte-8bf3s0",null,ye,{active:e(s)==="en"})}),ie("click",_e,()=>he("th")),ie("click",ke,()=>he("en")),n(Fe,ne),Je()}export{Da as component};
