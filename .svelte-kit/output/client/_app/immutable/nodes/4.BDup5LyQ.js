import"../chunks/DsnmJJEf.js";import"../chunks/BcIedFuQ.js";import{o as oe,a as ne}from"../chunks/CjsIklVn.js";import{aa as le,af as I,ag as S,a as h,ad as ve,ah as t,ai as a,aj as o,g as s,m as b,ac as H,s as r,n as K,t as W}from"../chunks/hnvWcoZH.js";import{e as T,s as J}from"../chunks/BUWzuOGr.js";import{i as M}from"../chunks/DMWe2FX4.js";import{t as w,s as C,a as ce}from"../chunks/C0Voc4CA.js";import{r as de}from"../chunks/DR3WUKjK.js";import{s as U}from"../chunks/d_EmPeYN.js";import{b as pe}from"../chunks/DGYhdjUt.js";import{i as me}from"../chunks/DXkH34Fe.js";import{g as V}from"../chunks/BeVKdWBa.js";var fe=I("<div><span> </span></div>"),ge=I('<div class="title-section svelte-c68gvn"><h1 class="main-title svelte-c68gvn">FORGOT PASSWORD</h1> <p class="sub-title svelte-c68gvn">Enter your email to receive a reset link.</p></div> <div class="form-section svelte-c68gvn"><div class="form-group svelte-c68gvn"><label class="label svelte-c68gvn" for="email">Email</label> <div><input id="email" type="email" placeholder="Enter your email" class="svelte-c68gvn"/></div></div> <!> <button class="primary-btn svelte-c68gvn"><!></button></div>',1),ue=I(`<div class="icon-wrapper svelte-c68gvn"><div class="success-circle svelte-c68gvn"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></div></div> <div class="title-section svelte-c68gvn" style="text-align:center;"><h1 class="main-title svelte-c68gvn">CHECK YOUR EMAIL</h1> <p class="sub-title svelte-c68gvn">We sent a link to <span style="color:#10b981; font-weight:600;"> </span>.<br/> Please check your inbox.</p> <p class="footer-text svelte-c68gvn" style="font-size: 13px; opacity: 0.7;">(This page will redirect to Login automatically once reset is
              complete)</p></div> <div class="footer-text svelte-c68gvn">Didn't receive it? <button class="resend-link svelte-c68gvn">Resend</button></div>`,1),_e=I('<div class="app-screen svelte-c68gvn"><div class="glass-header svelte-c68gvn"><button class="back-btn svelte-c68gvn" aria-label="Back"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></button></div> <div class="scroll-container svelte-c68gvn"><div class="content-wrapper svelte-c68gvn"><div class="form-card svelte-c68gvn"><!></div></div></div></div>');function Oe(Y,q){le(q,!1);const Q="http://158.108.102.14:8001";let p=b(""),m=b(!1),L=b(1),f=b(""),N=b("error"),c,k=b("");function P(e){e.key==="password_reset_done"&&(V("/auth/login"),localStorage.removeItem("password_reset_done"))}oe(()=>{typeof window<"u"&&window.addEventListener("storage",P)}),ne(()=>{typeof window<"u"&&window.removeEventListener("storage",P),c&&clearTimeout(c)});function x(e,n="error",d=""){c&&clearTimeout(c),r(f,e),r(N,n),r(k,d),c=setTimeout(()=>{r(f,""),r(k,"")},4e3)}function A(){s(f)&&(r(f,""),r(k,""),c&&clearTimeout(c))}function X(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async function Z(){if(A(),!s(p))return x("Please enter your email.","error","email");if(!X(s(p)))return x("Invalid email format.","error","email");r(m,!0);try{const e=await fetch(`${Q}/api/users/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s(p)})});if(e.ok)r(L,2);else{const n=await e.json().catch(()=>({}));x(n.detail||"Failed to send email.","error")}}catch{x("Cannot connect to server.","error")}finally{r(m,!1)}}me();var O=_e(),j=t(O),B=t(j);a(j);var R=o(j,2),F=t(R),z=t(F),$=t(z);{var ee=e=>{var n=ge(),d=H(n),v=o(d,2),g=t(v),u=o(t(g),2),_=t(u);de(_),a(u),a(g);var y=o(g,2);{var D=i=>{var l=fe(),G=t(l),re=t(G,!0);a(G),a(l),S(()=>{U(l,1,`message-container ${s(N)??""}`,"svelte-c68gvn"),J(re,s(f))}),w(3,l,()=>C,()=>({duration:200})),h(i,l)};M(y,i=>{s(f)&&i(D)})}var E=o(y,2),ae=t(E);{var se=i=>{var l=W("SENDING...");h(i,l)},ie=i=>{var l=W("SEND LINK");h(i,l)};M(ae,i=>{s(m)?i(se):i(ie,!1)})}a(E),a(v),S(()=>{U(u,1,`input-field ${s(k)==="email"?"error-border":""}`,"svelte-c68gvn"),_.disabled=s(m),E.disabled=s(m)}),w(1,d,()=>C),pe(_,()=>s(p),i=>r(p,i)),T("input",_,A),T("click",E,Z),w(1,v,()=>C),h(e,n)},te=e=>{var n=ue(),d=H(n),v=o(d,2),g=o(t(v),2),u=o(t(g)),_=t(u,!0);a(u),K(3),a(g),K(2),a(v);var y=o(v,2),D=o(t(y));a(y),S(()=>J(_,s(p))),w(1,d,()=>ce),w(1,v,()=>C),T("click",D,()=>{r(L,1)}),h(e,n)};M($,e=>{s(L)===1?e(ee):e(te,!1)})}a(z),a(F),a(R),a(O),S(()=>B.disabled=s(m)),T("click",B,()=>V("/auth/login")),h(Y,O),ve()}export{Oe as component};
