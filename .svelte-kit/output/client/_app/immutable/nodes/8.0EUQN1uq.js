import"../chunks/DsnmJJEf.js";import"../chunks/BcIedFuQ.js";import{o as D}from"../chunks/CjsIklVn.js";import{aa as G,af as m,a as u,ad as H,s as l,m as S,ah as i,g as d,aj as o,ai as r,ac as y,n as L,ag as A}from"../chunks/hnvWcoZH.js";import{s as B,e as U}from"../chunks/BUWzuOGr.js";import{i as w}from"../chunks/DMWe2FX4.js";import{t as c,a as k,s as f}from"../chunks/C0Voc4CA.js";import{i as Y}from"../chunks/DXkH34Fe.js";import{g as $}from"../chunks/BeVKdWBa.js";var K=m('<div class="icon-wrapper svelte-tu9pn8"><div class="loader svelte-tu9pn8"></div></div> <div class="title-section svelte-tu9pn8" style="text-align: center;"><h1 class="main-title svelte-tu9pn8">VERIFYING...</h1> <p class="sub-title svelte-tu9pn8">Please wait while we verify your email.</p></div>',1),q=m('<div class="icon-wrapper svelte-tu9pn8"><div class="success-circle svelte-tu9pn8"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-tu9pn8"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" class="svelte-tu9pn8"></path><polyline points="22 4 12 14.01 9 11.01" class="svelte-tu9pn8"></polyline></svg></div></div> <div class="title-section svelte-tu9pn8" style="text-align: center;"><h1 class="main-title svelte-tu9pn8">VERIFICATION SUCCESS</h1> <p class="sub-title svelte-tu9pn8"> </p> <p class="sub-title svelte-tu9pn8" style="margin-top: 16px; color: #9ca3af; font-weight: 600;">You can close this window now..</p></div>',1),z=m('<div class="icon-wrapper svelte-tu9pn8"><div class="error-circle svelte-tu9pn8"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-tu9pn8"><circle cx="12" cy="12" r="10" class="svelte-tu9pn8"></circle><line x1="15" y1="9" x2="9" y2="15" class="svelte-tu9pn8"></line><line x1="9" y1="9" x2="15" y2="15" class="svelte-tu9pn8"></line></svg></div></div> <div class="title-section svelte-tu9pn8" style="text-align: center;"><h1 class="main-title svelte-tu9pn8" style="color: #ef4444;">VERIFICATION FAILED</h1> <p class="sub-title svelte-tu9pn8"> </p></div> <div class="form-section svelte-tu9pn8"><button class="primary-btn error-btn svelte-tu9pn8">BACK TO HOME</button></div>',1),J=m('<div class="app-screen svelte-tu9pn8"><div class="scroll-container svelte-tu9pn8"><div class="content-wrapper svelte-tu9pn8"><div class="form-card svelte-tu9pn8"><!> <!> <!></div></div></div></div>');function re(P,T){G(T,!1);const V="http://158.108.102.14:8001";let v=S("loading"),p=S("Verifying your email...");D(async()=>{const a=new URLSearchParams(window.location.search).get("token");if(!a){l(v,"error"),l(p,"Invalid verification link (No token found).");return}try{const s=await fetch(`${V}/api/users/verify-email?token=${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}),e=await s.json().catch(()=>({}));if(s.ok){l(v,"success"),l(p,"Email verified successfully."),localStorage.setItem("register_verified",Date.now().toString());const n=new BroadcastChannel("auth-sync");n.postMessage("register-verified"),n.close()}else l(v,"error"),l(p,e.detail||e.message||"Verification failed or link expired.")}catch{l(v,"error"),l(p,"Cannot connect to server. Please try again later.")}});function j(){$("/")}Y();var h=J(),x=i(h),b=i(x),I=i(b),C=i(I);{var F=t=>{var a=K(),s=y(a),e=o(s,2);c(1,s,()=>k,()=>({duration:400})),c(1,e,()=>f),u(t,a)};w(C,t=>{d(v)==="loading"&&t(F)})}var E=o(C,2);{var M=t=>{var a=q(),s=y(a),e=o(s,2),n=o(i(e),2),g=i(n,!0);r(n),L(2),r(e),A(()=>B(g,d(p))),c(1,s,()=>k,()=>({duration:400,start:.5})),c(1,e,()=>f),u(t,a)};w(E,t=>{d(v)==="success"&&t(M)})}var N=o(E,2);{var O=t=>{var a=z(),s=y(a),e=o(s,2),n=o(i(e),2),g=i(n,!0);r(n),r(e);var _=o(e,2),R=i(_);r(_),A(()=>B(g,d(p))),c(1,s,()=>k,()=>({duration:400,start:.5})),c(1,e,()=>f),U("click",R,j),c(1,_,()=>f),u(t,a)};w(N,t=>{d(v)==="error"&&t(O)})}r(I),r(b),r(x),r(h),u(P,h),H()}export{re as component};
