import"../chunks/DsnmJJEf.js";import{$ as Sa,a4 as z,av as Ta,a7 as Ma,aj as Ra,l as Ba,i as y,f as t,a6 as m,aa as C,ab as R,a2 as h,a3 as La,af as v,ad as n,ae as a,ag as b,ak as ut,a1 as ot,a0 as vt,aG as Oa,ap as Na,al as Je}from"../chunks/BzFeUjkD.js";import{e as Pt,i as Ut}from"../chunks/CFC0_nPK.js";import{i as T}from"../chunks/yr0HFLoq.js";import{a as Ia,l as Aa,n as ze}from"../chunks/CZARb_ez.js";import{b as oe,s as Ct,r as re,a as Pa}from"../chunks/DMKKEYkG.js";import{s as rt}from"../chunks/Dx5pcVVY.js";import{t as lt,f as le,s as ce,a as He}from"../chunks/C9WUvhPB.js";import{g as Ua}from"../chunks/8b7-bA6A.js";import{a as Ge}from"../chunks/CfzA4fdq.js";import{S as N}from"../chunks/C0u8rGqG.js";import{API_BASE_URL as Ja,resolveImageUrl as za}from"../chunks/Cnqa9Cr2.js";import{R as de}from"../chunks/peVj2t_B.js";var Ha=m('<button><svg class="nav-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path></svg> <span class="btn-label"> </span></button>'),Ga=m('<button><svg class="nav-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> </button>'),Fa=m('<div class="mobile-overlay svelte-15yjt40" role="button" tabindex="0" aria-label="Close menu"></div> <div class="mobile-drawer svelte-15yjt40"><div class="drawer-header svelte-15yjt40"><span class="brand-name svelte-15yjt40" style="font-size: 1.4rem;">MENU</span><button class="close-btn svelte-15yjt40">&times;</button></div> <div class="drawer-search svelte-15yjt40"><input type="text" placeholder="Search..." class="drawer-search-input svelte-15yjt40"/></div> <div class="drawer-content svelte-15yjt40"><!> <div class="drawer-lang-item svelte-15yjt40"><div class="lang-label-group svelte-15yjt40"><svg class="nav-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path></svg> <span>Language</span></div> <div class="lang-toggle-pill svelte-15yjt40"><button>TH</button> <button>EN</button></div></div></div> <button class="drawer-item logout-special svelte-15yjt40">Logout</button></div>',1),Va=m('<div class="loading-container svelte-15yjt40"><div class="spinner svelte-15yjt40"></div> <p>Loading...</p></div>'),Ka=m('<div class="no-events svelte-15yjt40"><svg width="48" height="48" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="opacity: 0.5; margin-bottom: 10px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <p>No events found</p></div>'),qa=m('‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ <span style="font-size: 0.8em; opacity: 0.8;"></span>',1),Za=m('NOT OPEN <span style="font-size: 0.8em; opacity: 0.8;"></span>',1),$a=m('<span class="status-badge no-active svelte-15yjt40"><!></span>'),Qa=m('<span class="status-badge no-active svelte-15yjt40"> </span>'),Ya=m('<span class="status-badge pending svelte-15yjt40"> </span>'),Wa=m('<span class="status-badge svelte-15yjt40"> </span>'),Xa=m('<span class="type-badge daily svelte-15yjt40"> </span>'),ts=m('<div class="info-pill progress-pill svelte-15yjt40"><svg class="pill-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),es=m('<div><div class="info-pills svelte-15yjt40"><div class="info-pill svelte-15yjt40"><svg class="pill-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span> </span></div> <div class="info-pill svelte-15yjt40"><svg class="pill-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span> </span></div> <div class="info-pill svelte-15yjt40"><svg class="pill-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <div class="info-pill highlight-pill svelte-15yjt40"><svg class="pill-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> <span> </span></div> <!></div> <div class="card-separator svelte-15yjt40"></div></div>'),as=m('<button class="register-btn running svelte-15yjt40"> </button>'),ss=m('‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ <span style="font-size: 0.8em; opacity: 0.9;"></span>',1),ns=m('NOT APPLY <span style="font-size: 0.8em; opacity: 0.9;"></span>',1),is=m('<button class="register-btn unpublished svelte-15yjt40" disabled><!></button>'),os=m('<button class="register-btn no-active svelte-15yjt40" disabled> </button>'),rs=m('<button class="register-btn full svelte-15yjt40" disabled> </button>'),ls=m('<button class="register-btn coming-soon svelte-15yjt40" disabled> </button>'),cs=m('<button class="register-btn svelte-15yjt40"><!></button>'),ds=m('<button class="cancel-direct-btn svelte-15yjt40"> </button>'),us=m('<div class="event-card svelte-15yjt40"><div class="card-image svelte-15yjt40"></div> <div class="card-content svelte-15yjt40"><div class="card-header-row svelte-15yjt40"><h3 class="card-title svelte-15yjt40"> </h3> <div class="badges-col svelte-15yjt40"><!> <div class="type-badges svelte-15yjt40"><span> </span> <!></div> <div class="count-badge svelte-15yjt40"><svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right:4px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> </div></div></div> <p> </p> <!> <div class="card-footer-actions svelte-15yjt40"><button class="view-btn svelte-15yjt40"> </button> <div class="footer-actions svelte-15yjt40"><!> <!></div></div></div></div>'),vs=m('<div class="events-grid svelte-15yjt40"></div>'),ps=m('<p class="error-text svelte-15yjt40"> </p>'),_s=m('<p class="modal-subtitle svelte-15yjt40"> </p>'),fs=m('<label class="upload-label svelte-15yjt40"><input type="file" accept="image/*" hidden=""/> <div class="upload-placeholder svelte-15yjt40"><span>Click to Upload Image</span></div></label>'),hs=m('<div class="image-preview svelte-15yjt40"><img alt="Proof" class="svelte-15yjt40"/> <button class="remove-img-btn svelte-15yjt40">&times;</button></div>'),ys=m('<div class="modal-overlay svelte-15yjt40"><div class="modal-box svelte-15yjt40"><button class="modal-close svelte-15yjt40">&times;</button> <div class="modal-body svelte-15yjt40"><h3 class="modal-title svelte-15yjt40"> </h3> <!> <div class="upload-area svelte-15yjt40"><!></div> <button class="action-submit-btn purple-theme svelte-15yjt40"> </button></div></div></div>'),gs=m('<label class="radio-item svelte-15yjt40"><input type="radio" class="svelte-15yjt40"/> <span class="radio-label svelte-15yjt40"> </span></label>'),ms=m('<div class="reason-input svelte-15yjt40"><textarea rows="3" class="svelte-15yjt40"></textarea></div>'),bs=m('<div class="modal-overlay svelte-15yjt40"><div class="modal-box svelte-15yjt40"><button class="modal-close svelte-15yjt40">&times;</button> <div class="modal-body svelte-15yjt40"><h3 class="modal-title svelte-15yjt40" style="color: #ef4444;"> </h3> <p class="modal-subtitle svelte-15yjt40"> </p> <div class="cancel-options svelte-15yjt40"></div> <!> <div class="action-row"><button class="action-submit-btn cancel-confirm-btn svelte-15yjt40"> </button></div></div></div></div>'),js=m('<div class="app-container svelte-15yjt40"><header class="header-bar svelte-15yjt40"><div class="header-inner svelte-15yjt40"><div class="left-group svelte-15yjt40"><div class="brand"><span class="brand-name svelte-15yjt40">STUDENT</span></div> <nav class="nav-menu desktop-only svelte-15yjt40"></nav></div> <div class="search-bar-container desktop-only svelte-15yjt40"><div class="search-input-wrapper svelte-15yjt40"><svg class="search-icon svelte-15yjt40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" class="search-input svelte-15yjt40"/></div></div> <div class="user-zone svelte-15yjt40"><div class="timer-pill svelte-15yjt40"> </div> <div class="lang-switch desktop-only svelte-15yjt40"><button>TH</button> <span class="sep svelte-15yjt40">|</span> <button>EN</button></div> <button class="logout-btn desktop-only svelte-15yjt40" aria-label="Logout"><svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></button> <button class="mobile-toggle mobile-only svelte-15yjt40" aria-label="Toggle menu"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 9h16M4 15h16"></path></svg></button></div></div></header> <!> <div class="scroll-container svelte-15yjt40"><div class="content-wrapper svelte-15yjt40"><div class="page-header svelte-15yjt40"><h2 class="section-title svelte-15yjt40">Event List</h2> <div class="title-underline svelte-15yjt40"></div></div> <!> <footer class="app-footer svelte-15yjt40"><div class="footer-separator svelte-15yjt40"></div> <div class="footer-content svelte-15yjt40"><p class="copyright svelte-15yjt40">&copy; 2025 Cyber Geek. All rights reserved.</p> <p class="credits svelte-15yjt40">Designed & Developed by <span class="highlight svelte-15yjt40">Cyber Geek Development</span></p> <p class="contact svelte-15yjt40">Contact: <a href="mailto:cybergeek.dev@proton.me" class="svelte-15yjt40">cybergeek.dev@proton.me</a></p></div></footer></div></div> <!> <!></div>');function Ns(Fe,Ve){Sa(Ve,!0);const Ke=[],pt=Ja;let et=z(!1),Jt=z("event-list"),ue=z(!0),r=z("th"),jt=z(""),D=z(Ta([])),Dt=z("--:--:--"),Q=null,Z=null,wt=15e3,zt=!1,Et=null,St=null,ve=!1,pe=z(!1),Ht=z(!1),Tt=z(null),V=z(null),kt=z(null),Gt=null,K=z(""),_t=z("");const qe=["‡∏ï‡∏¥‡∏î‡∏ò‡∏∏‡∏£‡∏∞‡∏î‡πà‡∏ß‡∏ô / Urgent matter","‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û / Health issue","‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® / Weather condition","‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / Transportation","‡∏≠‡∏∑‡πà‡∏ô‡πÜ / Other"],_e=[{id:"event-list",label:"Event list",path:de.student.eventList,svg:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},{id:"my-event",label:"My event",path:de.student.myEvents,svg:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"account-setting",label:"Account setting",path:de.student.settings,svg:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}],k={th:{search_placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",status_active:"‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£",status_non_active:"‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£",status_not_open:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î",status_full:"‡πÄ‡∏ï‡πá‡∏°",status_joined:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß",status_resubmit:"‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà",status_pending:"‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",status_completed:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",status_cancelled:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß",status_ended:"‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß",btn_register:"‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô",btn_cancel:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",btn_joined:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß",btn_read_more:"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î",btn_read_less:"‡∏¢‡πà‡∏≠‡∏•‡∏á",btn_send_proof:"‡∏™‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô",btn_resubmit:"‡∏™‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà",upload_title:"‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô",upload_desc:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πà‡∏á",upload_btn:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á",upload_rejected:"‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡∏µ‡∏Å‡∏•‡∏±‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà",cancel_title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°",cancel_desc:"‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",cancel_confirm:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",reason_placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",alert_success:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",alert_cancel_success:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",inbox_title:"‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",inbox_empty:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",mark_all_read:"‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",event_type_single:"‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",event_type_multi:"‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",event_type_challenge:"‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢",daily_checkin:"‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô",checkin_progress:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤",days_remaining:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠",day_unit:"‡∏ß‡∏±‡∏ô",participants:"‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°"},en:{search_placeholder:"Search...",status_active:"ACTIVE",status_non_active:"NOT OPEN",status_not_open:"NOT OPEN",status_full:"FULL",status_joined:"JOINED",status_resubmit:"RESUBMIT",status_pending:"PENDING",status_completed:"COMPLETED",status_cancelled:"CANCELLED",status_ended:"ENDED",btn_register:"REGISTRATION",btn_cancel:"CANCEL",btn_joined:"JOINED",btn_read_more:"Read more",btn_read_less:"Read less",btn_send_proof:"SEND PROOF",btn_resubmit:"RESUBMIT PROOF",upload_title:"Upload Proof",upload_desc:"Please upload your slip or result.",upload_btn:"SUBMIT PROOF",upload_rejected:"‚ö†Ô∏è Proof rejected. Please resubmit.",cancel_title:"Cancel Participation",cancel_desc:"Please specify your reason for cancellation.",cancel_confirm:"CONFIRM CANCEL",reason_placeholder:"Specify other reason...",alert_success:"Success",alert_cancel_success:"Cancelled successfully",inbox_title:"Rewards & Notifications",inbox_empty:"No notifications",mark_all_read:"Mark all read",event_type_single:"Single Day",event_type_multi:"Multi Day",event_type_challenge:"Challenge",daily_checkin:"Daily Check-in",checkin_progress:"Progress",days_remaining:"Days Left",day_unit:"days",participants:"Participants"}};function Mt(e){y(r,e,!0),typeof localStorage<"u"&&localStorage.setItem("app_lang",e)}let Rt=null,Bt=null,Lt=null;Ma(async()=>{if(typeof localStorage<"u"){const e=localStorage.getItem("app_lang");e&&y(r,e,!0)}sa(),await Ze(),Ft(),Rt=()=>{document.hidden?Vt():Ft()},document.addEventListener("visibilitychange",Rt),Bt=()=>Vt(),Lt=()=>Ft(),window.addEventListener("offline",Bt),window.addEventListener("online",Lt)}),Ra(()=>{Q&&clearInterval(Q),Vt(),Rt&&document.removeEventListener("visibilitychange",Rt),Bt&&window.removeEventListener("offline",Bt),Lt&&window.removeEventListener("online",Lt)});function Ft(){if(Z)return;const e=async()=>{Z=null,await ft(),Z=setTimeout(e,wt)};Z=setTimeout(e,wt)}function Vt(){Z&&(clearTimeout(Z),Z=null)}async function Ze(){try{Et&&Et.abort(),Et=new AbortController;const e=yt(),s=await fetch(`${pt}/api/events/`,{method:"GET",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},signal:Et.signal});if(s.status===401){gt();return}if(!s.ok)throw new Error(`Server Error: ${s.status}`);const l=await s.json(),c=new Date,d=l.filter(i=>{if(i.event_end_date&&i.end_time){const o=new Date(`${i.event_end_date}T${i.end_time}`);if(c>o)return!1}else if(i.event_end_date){const o=new Date(i.event_end_date);if(o.setHours(23,59,59,999),c>o)return!1}return!0}).map(i=>{const o=t(D).find(p=>p.id===i.id);return{id:i.id,title:i.title,description:i.description,location:i.location,distance_km:i.distance_km,banner_image_url:za(i.banner_image_url)||"",participant_count:i.participant_count,max_participants:i.max_participants,is_active:i.is_active!==void 0?i.is_active:!0,is_published:i.is_published!==void 0?i.is_published:!0,is_full:i.is_full||i.participant_count>=i.max_participants,startDate:i.event_date,endDate:i.event_end_date,end_time:i.end_time||"",isJoined:o?o.isJoined:!1,isJoinedToday:o?o.isJoinedToday:!1,participationId:o?o.participationId:null,participationStatus:o?o.participationStatus:null,participationDate:o?o.participationDate:null,isExpanded:o?o.isExpanded:!1,isUpcoming:o?o.isUpcoming:!1,canRegisterToday:o?o.canRegisterToday:!1,event_type:i.event_type==="multi_day"?"multi_day":"single_day",allow_daily_checkin:!!i.allow_daily_checkin,max_checkins_per_user:typeof i.max_checkins_per_user=="number"?i.max_checkins_per_user:i.max_checkins_per_user?Number(i.max_checkins_per_user):null,checkin_count:o?o.checkin_count:0,completionCount:o?o.completionCount:0}});y(D,d,!0),await ft(),$e()}catch(e){console.error("Error loading events:",e)}finally{y(ue,!1)}}async function $e(){const e=yt(),s={"Content-Type":"application/json"};e&&(s.Authorization=`Bearer ${e}`);const l=5,c=[...t(D)];for(let d=0;d<c.length;d+=l){const i=c.slice(d,d+l);(await Promise.allSettled(i.map(async p=>{try{const u=await fetch(`${pt}/api/events/${p.id}/participants`,{headers:s});if(!u.ok)return{eventId:p.id,uniqueCount:p.participant_count||0};const B=await u.json();let E=[];Array.isArray(B)?E=B:B?.participants?E=B.participants:B?.data&&(E=B.data);const I=new Set;return E.forEach(P=>{const j=P.user_id||P.id;j&&I.add(j)}),{eventId:p.id,uniqueCount:I.size}}catch{return{eventId:p.id,uniqueCount:p.participant_count||0}}}))).forEach(p=>{if(p.status==="fulfilled"){const{eventId:u,uniqueCount:B}=p.value,E=t(D).findIndex(I=>I.id===u);E!==-1&&(t(D)[E].participant_count=B)}})}y(D,[...t(D)],!0)}async function ft(){try{if(zt)return;zt=!0,St&&St.abort(),St=new AbortController;const e=yt(),s=localStorage.getItem("user_info")||localStorage.getItem("user");if(!e||!s)return;let l;try{const i=JSON.parse(s);l=i.id||i.user_id}catch{return}const c=Date.now(),d=await fetch(`${pt}/api/participations/user/${l}?_=${c}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"Cache-Control":"no-cache"},signal:St.signal});if(d.ok){let i=await d.json();const o=new Date;o.setHours(0,0,0,0),y(D,t(D).map(p=>{const u=i.filter(f=>Number(f.event_id)===p.id),B=u.reduce((f,_)=>{const g=_?.status?String(_.status).toUpperCase():"";return g==="CANCELLED"||g==="CANCEL"?f:g==="COMPLETED"?f+1:f},0),E=p.participant_count;let I=null,P=!1;for(const f of u){const _=f.status?f.status.toUpperCase():"";if(_==="CANCELLED"||_==="CANCEL"){P=!0,console.log(`[Event ${p.id}] Skipping CANCELLED record:`,f.id);continue}(!I||f.id>I.id)&&(I=f)}const j=I,U=!!j;let A=!1;if(p.event_type==="multi_day"&&u.length>0){const f=new Date;f.setHours(0,0,0,0);const _=f.toISOString().split("T")[0];console.log(`[Event ${p.id}] Checking isJoinedToday - Today (server): ${_}`),A=u.some(g=>{const J=g.status?g.status.toUpperCase():"";if(J==="CANCELLED"||J==="CANCEL")return!1;const F=g.created_at||g.date;if(F){const H=new Date(F).toISOString().split("T")[0];return console.log(`  - Record ${g.id}: date=${H}, status=${J}, match=${H===_}`),H===_}return!1})}return j?(console.log(`[Event ${p.id}] Active record found:`,j.id,j.status,`isJoinedToday: ${A}`),j.created_at&&console.log(`  - Record date: ${new Date(j.created_at).toISOString()}`)):console.log(`[Event ${p.id}] No active record - can register`),{...p,isJoined:U,isJoinedToday:A,participationId:j?Number(j.id):null,participationStatus:j?j.status.toUpperCase():null,participationDate:j?j.created_at||j.date:null,isUpcoming:p.startDate?new Date(p.startDate)>o:!1,canRegisterToday:p.is_active&&p.is_published&&!U&&!p.is_full,participant_count:E,completionCount:p.completionCount,checkin_count:B,hasCancelledRecord:!U&&P}}),!0)}wt=15e3}catch(e){wt=Math.min(wt*2,6e4),console.error("updateUserStatus error:",e)}finally{zt=!1}}function fe(e){if(e.is_active&&e.is_published)return!1;const s=new Date,l=new Date(s);if(l.setHours(0,0,0,0),!e.startDate)return!1;const c=new Date(e.startDate);if(c.setHours(0,0,0,0),e.endDate){const d=new Date(e.endDate);if(d.setHours(23,59,59,999),l>=c&&s<=d)return!1}return c>l}let ht=z(!1);async function Qe(e){if(t(ht))return;if(e.isJoined){N.fire({icon:"info",title:t(r)==="th"?"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß":"One-time Registration",text:t(r)==="th"?"‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ":"You have already registered for this event and cannot register again.",confirmButtonText:"OK",confirmButtonColor:"#3b82f6"}).then(()=>{ze("student")});return}if(fe(e)){N.fire({icon:"info",title:t(r)==="th"?"‡∏£‡∏≠‡πÄ‡∏õ‡∏¥‡∏î":"Coming Soon",text:t(r)==="th"?`‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á ${me(e.startDate,"",t(r))}`:`Registration opens on ${me(e.startDate,"",t(r))}`,confirmButtonText:"OK"});return}const s=new Date;if(e.endDate){const d=new Date(e.endDate);if(d.setHours(23,59,59,999),s>d){N.fire({icon:"warning",title:t(r)==="th"?"‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤":"Registration Closed",text:t(r)==="th"?"‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß":"This event has ended",confirmButtonText:"OK"});return}}if(!e.is_active){N.fire("Unavailable",k[t(r)].status_not_open,"warning");return}y(ht,!0);const l=e.event_type==="multi_day";if((await N.fire({title:l?t(r)==="th"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô?":"Confirm Registration?":t(r)==="th"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ?":"Confirm Daily Registration?",text:l?t(r)==="th"?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° "${e.title}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
(‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô)`:`Register for "${e.title}"?
(System will auto-generate daily codes)`:t(r)==="th"?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° "${e.title}" ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
(‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏à‡∏ö‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)`:`Join "${e.title}" today?
(Must complete today)`,icon:"question",showCancelButton:!0,confirmButtonText:k[t(r)].btn_register,cancelButtonText:k[t(r)].btn_cancel,confirmButtonColor:"#10b981",cancelButtonColor:"#d33"})).isConfirmed)try{const d=yt();if(!d){gt(),y(ht,!1);return}l?await Ye(e,d):await We(`${pt}/api/participations/join`,e,d)}catch(d){console.error("Register Error:",d),N.fire("Error","Connection Error","error")}finally{y(ht,!1)}else y(ht,!1)}async function Ye(e,s){const l=await fetch(`${pt}/api/participations/pre-register/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(l.status===401){gt();return}if(l.ok){const c=await l.json();console.log("[PRE-REGISTER SUCCESS]",c),e.isJoined=!0,e.isJoinedToday=!0,e.participationStatus="JOINED",y(D,[...t(D)],!0),N.fire({icon:"success",title:t(r)==="th"?"‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"Registration Successful!",html:`
          <p>${t(r)==="th"?"‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ":"Today's Code"}: <strong style="font-size:1.5em;color:#10b981">${c.first_code}</strong></p>
          <p style="color:#666;font-size:0.9em">${t(r)==="th"?"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô":"New codes will be generated daily"}</p>
          <p style="color:#666;font-size:0.85em">${t(r)==="th"?"‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà":"Event ends"}: ${c.event_end_date}</p>
        `,confirmButtonText:"OK",confirmButtonColor:"#10b981"}),await ft()}else{const c=l.headers.get("content-type");if(c&&c.includes("application/json")){const d=await l.json();N.fire({icon:"error",title:t(r)==="th"?"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î":"Error",text:d.detail||"Error",confirmButtonText:"OK"})}else N.fire("Error","Server Error","error")}}async function We(e,s,l){const c=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({event_id:s.id})});if(c.status===401){gt();return}if(c.ok){const d=await c.json(),i=d.id&&s.participationId===d.id;console.log("[JOIN SUCCESS]",{participationId:d.id,wasReactivated:i,joinCode:d.join_code}),s.isJoined=!0,s.isJoinedToday=!0,s.participationId=d.id||null,s.participationStatus="JOINED",y(D,[...t(D)],!0),N.fire({icon:"success",title:i?t(r)==="th"?"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"Re-registered!":k[t(r)].alert_success,text:`${t(r)==="th"?"‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°":"Join Code"}: ${d.join_code}`,timer:2e3,showConfirmButton:!0}),await ft()}else{const d=c.headers.get("content-type");if(d&&d.includes("application/json")){const o=(await c.json()).detail||"Error";o.includes("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß")?(await ft(),N.fire({icon:"info",title:t(r)==="th"?"‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô":"Notice",text:o,confirmButtonText:"OK"})):N.fire({icon:"error",title:t(r)==="th"?"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î":"Error",text:o,confirmButtonText:"OK"})}else{const i=await c.text();console.warn("Non-JSON API Response:",i),N.fire("Failed","Server Error","error")}}}function Xe(e){y(V,e,!0),y(K,""),y(_t,""),y(Ht,!0)}function he(){y(Ht,!1),y(V,null)}async function ta(){if(!t(V))return;let e=t(K);if(t(K).includes("Other")||t(K).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")){if(!t(_t).trim()){N.fire({icon:"warning",title:t(r)==="th"?"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°":"Reason not specified",text:t(r)==="th"?"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°":"Please provide more details",confirmButtonColor:"#f59e0b"});return}e=t(_t)}try{const s=yt();if(!s){gt();return}if(!t(V).participationId&&(await ft(),!t(V).participationId))return;const l=await fetch(`${pt}/api/participations/${t(V).participationId}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({cancellation_reason:e})});if(l.ok)t(V).isJoined=!1,t(V).participationId=null,t(V).participationStatus=null,t(V).participant_count=Math.max(0,t(V).participant_count-1),y(D,[...t(D)],!0),N.fire({icon:"success",title:k[t(r)].alert_cancel_success,timer:1500,showConfirmButton:!1}),he();else{const c=await l.json();N.fire("Failed",c.detail||"Error","error")}}catch{N.fire("Error","Connection Error","error")}}function ye(){y(pe,!1),y(Tt,null)}function ea(e){const s=e.target;if(s.files&&s.files[0]){Gt=s.files[0];const l=new FileReader;l.onload=c=>{y(kt,c.target?.result,!0)},l.readAsDataURL(s.files[0])}}async function aa(){if(!(!t(Tt)||!Gt))try{N.fire({icon:"success",title:k[t(r)].alert_success,timer:2e3,showConfirmButton:!1}),t(Tt).participationStatus="proof_submitted",y(D,[...t(D)],!0),ye()}catch{N.fire("Error","Failed","error")}}function sa(){Q&&clearInterval(Q);const e=yt();if(!e){y(Dt,"00:00:00");return}try{const s=e.split(".")[1],c=JSON.parse(atob(s)).exp*1e3;ge(c),Q=setInterval(()=>{ge(c)},1e3)}catch{}}function ge(e){const s=Date.now(),l=e-s;if(l<=0)Q&&clearInterval(Q),y(Dt,"00:00:00"),gt();else{const c=Math.floor(l/1e3),d=Math.floor(c/3600),i=Math.floor(c%3600/60),o=c%60;y(Dt,`${d.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`)}}function yt(){if(typeof localStorage>"u")return"";const e=localStorage.getItem("access_token")||"";return e||console.warn("No access token found in localStorage"),e}async function gt(){ve||(ve=!0,typeof localStorage<"u"&&localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),Ge.logout(),Q&&clearInterval(Q),Z&&(clearTimeout(Z),Z=null),await N.fire({icon:"error",title:"Session Expired",text:"Expired",timer:3e3,showConfirmButton:!1,allowOutsideClick:!1}),window.location.href="/auth/login")}function na(e,s,l){if(!e)return"-";const c=l==="th"?"th-TH":"en-GB",d={day:"numeric",month:"long",year:"numeric",timeZone:"Asia/Bangkok"},o=new Date(e).toLocaleDateString(c,d);if(!s)return o;const u=new Date(s).toLocaleDateString(c,d);return o===u?o:`${o} - ${u}`}function ia(e,s,l){if(!e)return"-";const c=new Date(e),d=s?new Date(s):null,i={hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Bangkok"},o=c.toLocaleTimeString("en-GB",i),p=d?d.toLocaleTimeString("en-GB",i):"";return l==="th"?d?`${o} - ${p} ‡∏ô.`:`${o} ‡∏ô.`:d?`${o} - ${p}`:`${o}`}function me(e,s="",l="th"){if(!e)return"-";const c=l==="th"?"th-TH":"en-GB",d={day:"numeric",month:"short",year:"numeric",timeZone:"Asia/Bangkok"},o=new Date(e).toLocaleDateString(c,d);if(!s)return o;const u=new Date(s).toLocaleDateString(c,d);return o===u?o:`${o} - ${u}`}function oa(e){const s=t(qt)[e].id,l=t(D).findIndex(c=>c.id===s);l!==-1&&(t(D)[l].isExpanded=!t(D)[l].isExpanded,y(D,[...t(D)],!0))}function be(e,s){y(Jt,e,!0),y(et,!1),Ua(s)}function je(){y(et,!1),typeof localStorage<"u"&&localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),Ge.logout(),window.location.href="/auth/login"}let we=z(""),Kt=null;Ba(()=>{Kt&&clearTimeout(Kt),Kt=setTimeout(()=>{y(we,t(jt).toLowerCase().trim(),!0)},250)});let qt=Oa(()=>t(D).filter(e=>{if(e.endDate){const l=new Date,c=new Date(e.endDate);if(c.setHours(23,59,59,999),l>c)return!1}if(e.isJoined&&!e.isJoinedToday)return!1;const s=t(we);return s?e.title.toLowerCase().includes(s)||e.location.toLowerCase().includes(s)||e.description.toLowerCase().includes(s):!0}));var Zt=js(),$t=n(Zt),ke=n($t),Qt=n(ke),xe=v(n(Qt),2);Pt(xe,21,()=>_e,Ut,(e,s)=>{var l=Ha();let c;var d=n(l),i=n(d);a(d);var o=v(d,2),p=n(o,!0);a(o),a(l),C(()=>{c=rt(l,1,"menu-btn svelte-15yjt40",null,c,{active:t(Jt)===t(s).id}),Ct(i,"d",t(s).svg),b(p,t(s).label)}),R("click",l,()=>be(t(s).id,t(s).path)),h(e,l)}),a(xe),a(Qt);var Yt=v(Qt,2),Ce=n(Yt),Wt=v(n(Ce),2);re(Wt),a(Ce),a(Yt);var De=v(Yt,2),Xt=n(De),ra=n(Xt,!0);a(Xt);var te=v(Xt,2),ee=n(te);let Ee;var Se=v(ee,4);let Te;a(te);var Me=v(te,2),la=v(Me,2);a(De),a(ke),a($t);var Re=v($t,2);{var ca=e=>{var s=Fa(),l=ot(s),c=v(l,2),d=n(c),i=v(n(d));a(d);var o=v(d,2),p=n(o);re(p),a(o);var u=v(o,2),B=n(u);Pt(B,17,()=>_e,Ut,(_,g)=>{var J=Ga();let F;var H=n(J),mt=n(H);a(H);var se=v(H);a(J),C(()=>{F=rt(J,1,"drawer-item svelte-15yjt40",null,F,{active:t(Jt)===t(g).id}),Ct(mt,"d",t(g).svg),b(se,` ${t(g).label??""}`)}),R("click",J,()=>be(t(g).id,t(g).path)),h(_,J)});var E=v(B,2),I=v(n(E),2),P=n(I);let j;var U=v(P,2);let A;a(I),a(E),a(u);var f=v(u,2);a(c),C(()=>{j=rt(P,1,"svelte-15yjt40",null,j,{active:t(r)==="th"}),A=rt(U,1,"svelte-15yjt40",null,A,{active:t(r)==="en"})}),R("click",l,()=>y(et,!1)),R("keydown",l,_=>{(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&y(et,!1)}),lt(3,l,()=>le,()=>({duration:200})),R("click",i,()=>y(et,!1)),oe(p,()=>t(jt),_=>y(jt,_)),R("click",P,()=>Mt("th")),R("click",U,()=>Mt("en")),R("click",f,je),lt(3,c,()=>ce,()=>({axis:"x",duration:300})),h(e,s)};T(Re,e=>{t(et)&&e(ca)})}var ae=v(Re,2),Be=n(ae),da=v(n(Be),2);{var ua=e=>{var s=Va();h(e,s)},va=e=>{var s=vt(),l=ot(s);{var c=i=>{var o=Ka();h(i,o)},d=i=>{var o=vs();Pt(o,21,()=>t(qt),Ut,(p,u,B)=>{var E=us(),I=n(E);Ia(I,(x,w)=>Aa?.(x,w),()=>t(u).banner_image_url);var P=v(I,2),j=n(P),U=n(j),A=n(U,!0);a(U);var f=v(U,2),_=n(f);{var g=x=>{var w=$a(),G=n(w);{var Y=M=>{var L=qa();ut(),h(M,L)},at=M=>{var L=Za();ut(),h(M,L)};T(G,M=>{t(r)==="th"?M(Y):M(at,!1)})}a(w),h(x,w)},J=x=>{var w=vt(),G=ot(w);{var Y=M=>{var L=Qa(),$=n(L,!0);a(L),C(()=>b($,k[t(r)].status_not_open)),h(M,L)},at=M=>{var L=vt(),$=ot(L);{var ct=S=>{var O=Ya(),q=n(O,!0);a(O),C(()=>b(q,k[t(r)].status_pending)),h(S,O)},W=S=>{var O=Wa(),q=n(O,!0);a(O),C(()=>b(q,k[t(r)].status_active)),h(S,O)};T($,S=>{t(u).participationStatus==="CHECKED_IN"?S(ct):S(W,!1)},!0)}h(M,L)};T(G,M=>{t(u).is_active?M(at,!1):M(Y)},!0)}h(x,w)};T(_,x=>{t(u).is_published?x(J,!1):x(g)})}var F=v(_,2),H=n(F);let mt;var se=n(H,!0);a(H);var ha=v(H,2);{var ya=x=>{var w=Xa(),G=n(w,!0);a(w),C(()=>b(G,k[t(r)].daily_checkin)),h(x,w)};T(ha,x=>{t(u).event_type==="multi_day"&&t(u).allow_daily_checkin&&x(ya)})}a(F);var Oe=v(F,2),ga=v(n(Oe));a(Oe),a(f),a(j);var Ot=v(j,2);let Ne;var ma=n(Ot,!0);a(Ot);var Ie=v(Ot,2);{var ba=x=>{var w=es(),G=n(w),Y=n(G),at=v(n(Y),2),M=n(at,!0);a(at),a(Y);var L=v(Y,2),$=v(n(L),2),ct=n($,!0);a($),a(L);var W=v(L,2),S=v(n(W),2),O=n(S,!0);a(S),a(W);var q=v(W,2),It=v(n(q),2),ne=n(It);a(It),a(q);var st=v(q,2);{var nt=X=>{var dt=ts(),At=v(n(dt),2),it=n(At);a(At),a(dt),C(()=>b(it,`${k[t(r)].checkin_progress??""}: ${t(u).checkin_count??""}/${t(u).max_checkins_per_user??"-"??""} ${k[t(r)].day_unit??""}`)),h(X,dt)};T(st,X=>{t(u).event_type==="multi_day"&&t(u).allow_daily_checkin&&X(nt)})}a(G),ut(2),a(w),C((X,dt)=>{b(M,t(u).location),b(ct,X),b(O,dt),b(ne,`${t(u).distance_km??""} KM`)},[()=>na(t(u).startDate,t(u).endDate,t(r)),()=>ia(t(u).startDate,t(u).endDate,t(r))]),lt(3,w,()=>ce,()=>({duration:300})),h(x,w)};T(Ie,x=>{t(u).isExpanded&&x(ba)})}var Ae=v(Ie,2),Nt=n(Ae),ja=n(Nt,!0);a(Nt);var Pe=v(Nt,2),Ue=n(Pe);{var wa=x=>{var w=as(),G=n(w,!0);a(w),C(()=>b(G,t(r)==="th"?"‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡πâ‡∏ß":"‚úÖ Registered")),R("click",w,()=>ze("student")),h(x,w)},ka=x=>{var w=vt(),G=ot(w);{var Y=M=>{var L=is(),$=n(L);{var ct=S=>{var O=ss();ut(),h(S,O)},W=S=>{var O=ns();ut(),h(S,O)};T($,S=>{t(r)==="th"?S(ct):S(W,!1)})}a(L),h(M,L)},at=M=>{var L=vt(),$=ot(L);{var ct=S=>{var O=os(),q=n(O,!0);a(O),C(()=>b(q,k[t(r)].status_not_open)),h(S,O)},W=S=>{var O=vt(),q=ot(O);{var It=st=>{var nt=rs(),X=n(nt,!0);a(nt),C(()=>b(X,k[t(r)].status_full)),h(st,nt)},ne=st=>{var nt=vt(),X=ot(nt);{var dt=it=>{var tt=ls(),ie=n(tt,!0);a(tt),C(()=>b(ie,t(r)==="th"?"‚è≥ ‡∏£‡∏≠‡πÄ‡∏õ‡∏¥‡∏î":"‚è≥ Coming Soon")),h(it,tt)},At=it=>{var tt=cs(),ie=n(tt);{var Da=bt=>{var xt=Je();C(()=>b(xt,t(r)==="th"?"üîÑ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á":"üîÑ Register Again")),h(bt,xt)},Ea=bt=>{var xt=Je();C(()=>b(xt,t(r)==="th"?"üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£":"üìù Register")),h(bt,xt)};T(ie,bt=>{t(u).hasCancelledRecord?bt(Da):bt(Ea,!1)})}a(tt),C(()=>tt.disabled=t(ht)),R("click",tt,()=>Qe(t(u))),h(it,tt)};T(X,it=>{fe(t(u))?it(dt):it(At,!1)},!0)}h(st,nt)};T(q,st=>{t(u).is_full?st(It):st(ne,!1)},!0)}h(S,O)};T($,S=>{t(u).is_active?S(W,!1):S(ct)},!0)}h(M,L)};T(G,M=>{t(u).is_published?M(at,!1):M(Y)},!0)}h(x,w)};T(Ue,x=>{t(u).isJoined?x(wa):x(ka,!1)})}var xa=v(Ue,2);{var Ca=x=>{var w=ds(),G=n(w,!0);a(w),C(()=>b(G,t(r)==="th"?"‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å":"‚ùå Cancel")),R("click",w,()=>Xe(t(u))),h(x,w)};T(xa,x=>{t(u).isJoined&&t(u).checkin_count===0&&x(Ca)})}a(Pe),a(Ae),a(P),a(E),C(()=>{b(A,t(u).title),mt=rt(H,1,"type-badge svelte-15yjt40",null,mt,{multi:t(u).event_type==="multi_day"}),b(se,t(u).event_type==="multi_day"?k[t(r)].event_type_multi:k[t(r)].event_type_single),b(ga,` ${t(u).participant_count??""}/${t(u).max_participants??""} ${k[t(r)].participants??""}`),Ne=rt(Ot,1,"card-desc svelte-15yjt40",null,Ne,{expanded:t(u).isExpanded}),b(ma,t(u).description),b(ja,t(u).isExpanded?k[t(r)].btn_read_less:k[t(r)].btn_read_more)}),R("click",Nt,()=>oa(B)),h(p,E)}),a(o),h(i,o)};T(l,i=>{t(qt).length===0?i(c):i(d,!1)})}h(e,s)};T(da,e=>{t(ue)?e(ua):e(va,!1)})}ut(2),a(Be),a(ae);var Le=v(ae,2);{var pa=e=>{var s=ys(),l=n(s),c=n(l),d=v(c,2),i=n(d),o=n(i,!0);a(i);var p=v(i,2);{var u=f=>{var _=ps(),g=n(_,!0);a(_),C(()=>b(g,k[t(r)].upload_rejected)),h(f,_)},B=f=>{var _=_s(),g=n(_,!0);a(_),C(()=>b(g,k[t(r)].upload_desc)),h(f,_)};T(p,f=>{t(Tt)?.participationStatus==="REJECTED"?f(u):f(B,!1)})}var E=v(p,2),I=n(E);{var P=f=>{var _=fs(),g=n(_);ut(2),a(_),R("change",g,ea),h(f,_)},j=f=>{var _=hs(),g=n(_),J=v(g,2);a(_),C(()=>Ct(g,"src",t(kt))),R("click",J,()=>{y(kt,null),Gt=null}),h(f,_)};T(I,f=>{t(kt)?f(j,!1):f(P)})}a(E);var U=v(E,2),A=n(U,!0);a(U),a(d),a(l),a(s),C(()=>{b(o,k[t(r)].upload_title),U.disabled=!t(kt),b(A,k[t(r)].upload_btn)}),R("click",c,ye),R("click",U,aa),lt(3,l,()=>He,()=>({duration:250,start:.9})),lt(3,s,()=>le,()=>({duration:200})),h(e,s)};T(Le,e=>{t(pe)&&e(pa)})}var _a=v(Le,2);{var fa=e=>{var s=bs(),l=n(s),c=n(l),d=v(c,2),i=n(d),o=n(i,!0);a(i);var p=v(i,2),u=n(p,!0);a(p);var B=v(p,2);Pt(B,21,()=>qe,Ut,(A,f)=>{var _=gs(),g=n(_);re(g);var J,F=v(g,2),H=n(F,!0);a(F),a(_),C(()=>{J!==(J=t(f))&&(g.value=(g.__value=t(f))??""),b(H,t(f))}),Pa(Ke,[],g,()=>(t(f),t(K)),mt=>y(K,mt)),h(A,_)}),a(B);var E=v(B,2);{var I=A=>{var f=ms(),_=n(f);Na(_),a(f),C(()=>Ct(_,"placeholder",k[t(r)].reason_placeholder)),oe(_,()=>t(_t),g=>y(_t,g)),lt(3,f,()=>ce),h(A,f)};T(E,A=>{(t(K).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")||t(K).includes("Other"))&&A(I)})}var P=v(E,2),j=n(P),U=n(j,!0);a(j),a(P),a(d),a(l),a(s),C(A=>{b(o,k[t(r)].cancel_title),b(u,k[t(r)].cancel_desc),j.disabled=A,b(U,k[t(r)].cancel_confirm)},[()=>!t(K)||(t(K).includes("Other")||t(K).includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ"))&&!t(_t).trim()]),R("click",c,he),R("click",j,ta),lt(3,l,()=>He,()=>({duration:250,start:.9})),lt(3,s,()=>le,()=>({duration:200})),h(e,s)};T(_a,e=>{t(Ht)&&e(fa)})}a(Zt),C(()=>{Ct(Wt,"placeholder",k[t(r)].search_placeholder),b(ra,t(Dt)),Ee=rt(ee,1,"svelte-15yjt40",null,Ee,{active:t(r)==="th"}),Te=rt(Se,1,"svelte-15yjt40",null,Te,{active:t(r)==="en"})}),oe(Wt,()=>t(jt),e=>y(jt,e)),R("click",ee,()=>Mt("th")),R("click",Se,()=>Mt("en")),R("click",Me,je),R("click",la,()=>y(et,!t(et))),h(Fe,Zt),La()}export{Ns as component};
